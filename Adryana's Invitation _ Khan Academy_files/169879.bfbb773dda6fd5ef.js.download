"use strict";(self.webpackChunkstatic=self.webpackChunkstatic||[]).push([["169879"],{736324:function(e,t,n){n.d(t,{Z:function(){return a}});var r=n(285665);let a=function(){return new Map([["am",{languageName:r.ag._({id:"UV0J8D",message:"Amharic"}),countries:["ET"]}],["ar",{languageName:r.ag._({id:"8HV3WN",message:"Arabic"}),url:"https://ar.khanacademy.org",countries:["DZ","BH","TD","KM","DJ","EG","ER","IQ","JO","KW","LB","LY","MR","MA","OM","PS","QA","SA","SO","SD","SY","TZ","TN","AE","YE"]}],["az",{languageName:r.ag._({id:"/IkoRr",message:"Azerbaijani"}),url:"https://az.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360040712732-Az%C9%99rbaycan-komandas%C4%B1-Azerbaijani-Team-",countries:["AZ"]}],["bg",{languageName:r.ag._({id:"KhEBDR",message:"Bulgarian"}),url:"https://bg.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360010442672-%D0%91%D1%8A%D0%BB%D0%B3%D0%B0%D1%80%D1%81%D0%BA%D0%B8%D1%8F%D1%82-%D0%B5%D0%BA%D0%B8%D0%BF-The-Bulgarian-Team",countries:["BG"]}],["bn",{languageName:r.ag._({id:"6e+N4u",message:"Bangla"}),url:"https://bn.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360035818672-%E0%A6%AC%E0%A6%BE%E0%A6%82%E0%A6%B2%E0%A6%BE-%E0%A6%A6%E0%A6%B2-The-Bangla-team",countries:["IN","BD"]}],["cs",{languageName:r.ag._({id:"w9VTXG",message:"Czech"}),url:"https://cs.khanacademy.org",teamUrl:"https://support.khanacademy.org/hc/en-us/articles/360048926171-%C4%8Cesk%C3%BD-t%C3%BDm-The-Czech-Team",countries:["CZ"]}],["da",{languageName:r.ag._({id:"Fo2vDn",message:"Danish"}),url:"https://da.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360020642472-Det-danske-hold-The-Danish-Team",countries:["DK","GL","FO"]}],["de",{languageName:r.ag._({id:"DDcvSo",message:"German"}),url:"https://de.khanacademy.org/",teamUrl:"https://www.kadeutsch.org/",countries:["DE","CH","AT","LI","LU","BE"]}],["el",{languageName:r.ag._({id:"CZXzs4",message:"Greek"}),url:"https://el.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360021573432-%CE%97-%CE%95%CE%BB%CE%BB%CE%B7%CE%BD%CE%B9%CE%BA%CE%AE-%CE%9F%CE%BC%CE%AC%CE%B4%CE%B1-The-Greek-Team",countries:["GR","AL","CY"]}],["en",{languageName:r.ag._({id:"lYGfRP",message:"English"}),url:"https://www.khanacademy.org/",countries:["US","CA","GB","AU","IE","NZ"]}],["es",{languageName:r.ag._({id:"65A04M",message:"Spanish"}),url:"https://es.khanacademy.org/",countries:["AR","BO","CL","CR","CU","DO","EC","SV","GQ","GT","HN","MX","NI","PA","PY","PE","ES","UY","VE"]}],["fa",{languageName:r.ag._({id:"JFI3iH",message:"Persian"}),url:"https://fa.khanacademy.org",countries:["IR","AF","TJ","IQ","AZ"]}],["fa-af",{languageName:r.ag._({id:"DoPN1H",message:"Dari"}),url:"https://fa-af.khanacademy.org",countries:["AF"]}],["fr",{languageName:r.ag._({id:"nLC6tu",message:"French"}),url:"https://fr.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360020640812-L-%C3%A9quipe-francophone-The-French-Team",countries:["FR","CA","BE","CM","CD","GQ","HT","CI","LU","MG","NE","RW"]}],["fv",{languageName:r.ag._({id:"RCpRdY",message:"Fulfulde"}),countries:["CM"]}],["gu",{languageName:r.ag._({id:"sGpqyx",message:"Gujarati"}),url:"https://gu.khanacademy.org",countries:["IN"]}],["he",{languageName:r.ag._({id:"3oTCgM",message:"Hebrew"}),url:"https://he.khanacademy.org",countries:["IL"]}],["hi",{languageName:r.ag._({id:"tGjibo",message:"Hindi"}),url:"https://hi.khanacademy.org",countries:["IN","NP"]}],["hu",{languageName:r.ag._({id:"mkWad2",message:"Hungarian"}),url:"https://hu.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360016289291-A-magyar-csapat-The-Hungarian-Team",countries:["HU"]}],["hy",{languageName:r.ag._({id:"AkeObK",message:"Armenian"}),url:"https://hy.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360022981172-%D5%80%D5%A1%D5%B5%D5%A1%D5%AC%D5%A5%D5%A6%D5%B8%D6%82-%D5%A9%D5%AB%D5%B4-The-Armenian-Team",countries:["AM"]}],["id",{languageName:r.ag._({id:"BQukYF",message:"Indonesian"}),url:"https://id.khanacademy.org",countries:["ID"]}],["is",{languageName:r.ag._({id:"rJl8hp",message:"Icelandic"}),countries:["IS"]}],["it",{languageName:r.ag._({id:"Lj7sBL",message:"Italian"}),url:"https://it.khanacademy.org",countries:["IT","CH"]}],["ja",{languageName:r.ag._({id:"dFtidv",message:"Japanese"}),url:"https://ja.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360016049411-%E6%97%A5%E6%9C%AC%E8%AA%9E%E5%8C%96%E3%83%81%E3%83%BC%E3%83%A0-The-Japanese-Team",countries:["JP"]}],["ka",{languageName:r.ag._({id:"17Lyf3",message:"Georgian"}),url:"https://ka.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360009070571-%E1%83%A5%E1%83%90%E1%83%A0%E1%83%97%E1%83%A3%E1%83%9A%E1%83%98-%E1%83%92%E1%83%A3%E1%83%9C%E1%83%93%E1%83%98-The-Georgian-team",countries:["GE"]}],["kk",{languageName:r.ag._({id:"F/vx72",message:"Kazakh"}),url:"https://kk.khanacademy.org/",countries:["KZ"]}],["km",{languageName:r.ag._({id:"Fb6WVr",message:"Khmer"}),url:"https://km.khanacademy.org/",countries:["KH","TH","VN"]}],["kn",{languageName:r.ag._({id:"ffJEXe",message:"Kannada"}),url:"https://kn.khanacademy.org",countries:["IN"]}],["ko",{languageName:r.ag._({id:"h6S9Yz",message:"Korean"}),url:"https://ko.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360020896531-%ED%95%9C%EA%B5%AD%ED%8C%80-The-Korean-Team",countries:["KP","KR"]}],["ky",{languageName:r.ag._({id:"1v5xlu",message:"Kyrgyz/Khirgiz"}),url:"https://ky.khanacademy.org",countries:["KG"]}],["lt",{languageName:r.ag._({id:"Ot2qtY",message:"Lithuanian"}),url:"https://lt.khanacademy.org/",teamUrl:"https://support.khanacademy.org/hc/en-us/articles/4422809940621-Lietuvi%C5%B3-komanda-The-Lithuanian-Team",countries:["LT"]}],["lv",{languageName:r.ag._({id:"/0YsGP",message:"Latvian"}),url:"https://lv.khanacademy.org/",teamUrl:"https://support.khanacademy.org/hc/en-us/articles/4407784419341-Latvie%C5%A1u-valodas-komanda-The-Latvian-team",countries:["LV"]}],["mn",{languageName:r.ag._({id:"sBc/n8",message:"Mongolian"}),url:"https://mn.khanacademy.org",countries:["MN"]}],["ms",{languageName:r.ag._({id:"tF97tn",message:"Malay"}),url:"https://ms.khanacademy.org",countries:["MY"]}],["my",{languageName:r.ag._({id:"WRBPIL",message:"Burmese"}),url:"https://my.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360020696512-%E1%80%99%E1%80%BC%E1%80%94-%E1%80%99%E1%80%AC%E1%80%A1%E1%80%9E%E1%80%84-%E1%80%B8-The-Burmese-team",countries:["MM"]}],["nb",{languageName:r.ag._({id:"P1x1Fb",message:"Norwegian Bokm\xe5l"}),url:"https://nb.khanacademy.org/",countries:["NO"]}],["nl",{languageName:r.ag._({id:"KIjvtr",message:"Dutch"}),url:"https://nl.khanacademy.org",teamUrl:"https://support.khanacademy.org/hc/en-us/articles/360059927231-Het-Nederlandse-Vlaamse-team-The-Dutch-Flemish-Team",countries:["NL","BE","SR","AW","CW","SX"]}],["pa",{languageName:r.ag._({id:"u9RZ7+",message:"Punjabi"}),url:"https://pa.khanacademy.org/",countries:["IN","PK"]}],["pl",{languageName:r.ag._({id:"trnWaw",message:"Polish"}),url:"https://pl.khanacademy.org/",countries:["PL"]}],["ps",{languageName:r.ag._({id:"xmWhgF",message:"Pashto"}),url:"https://www.youtube.com/channel/UC7OMM-IeI3VU6FyHDDzzpdQ",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360035494331-The-Pashto-team-د-پښتو-ټیم-",countries:["AF","PK","IN"]}],["pt",{languageName:r.ag._({id:"R7+D0/",message:"Portuguese (Brazil)"}),url:"https://pt.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360006952791-O-time-Brasil-The-Brazilian-Portuguese-team",countries:["BR","AO","CV","GQ","GW","MO","MZ","PT","ST","TL"]}],["pt-pt",{languageName:r.ag._({id:"512Uma",message:"Portuguese (Portugal)"}),url:"https://pt-pt.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360031879052-A-equipa-em-Portugal-The-European-Portuguese-team",countries:["PT","BR","AO","CV","GQ","GW","MO","MZ","ST","TL"]}],["ro",{languageName:r.ag._({id:"uJc01W",message:"Romanian"}),url:"https://ro.khanacademy.org/",teamUrl:"https://support.khanacademy.org/hc/en-us/articles/360058649011-Echipa-Rom%C3%A2niei-The-Romanian-Team",countries:["RO"]}],["ru",{languageName:r.ag._({id:"nji0/X",message:"Russian"}),url:"https://ru.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360020641352-%D0%A0%D1%83%D1%81%D1%81%D0%BA%D0%BE%D1%8F%D0%B7%D1%8B%D1%87%D0%BD%D0%B0%D1%8F-%D0%BA%D0%BE%D0%BC%D0%B0%D0%BD%D0%B4%D0%B0-The-Russian-Team",countries:["RU","BY","KZ","KG"]}],["rw",{languageName:r.ag._({id:"T6KlzR",message:"Kinyarwanda"}),countries:["RW"]}],["sl",{languageName:r.ag._({id:"LSdcWW",message:"Slovenian"}),countries:["SI"]}],["so",{languageName:r.ag._({id:"bE1aWK",message:"Somali"}),countries:["SO"]}],["sq",{languageName:r.ag._({id:"pVxf7b",message:"Albanian"}),countries:["AL"]}],["sr",{languageName:r.ag._({id:"9aBtdW",message:"Serbian"}),url:"https://sr.khanacademy.org/",countries:["RS"]}],["sv",{languageName:r.ag._({id:"UaISq3",message:"Swedish"}),url:"https://sv.khanacademy.org",countries:["SE"]}],["sw",{languageName:r.ag._({id:"Yz+oFV",message:"Swahili"}),url:"https://sw.khanacademy.org",countries:["TZ"]}],["ta",{languageName:r.ag._({id:"fb427h",message:"Tamil"}),url:"https://ta.khanacademy.org",countries:["IN","LK","MY"]}],["te",{languageName:r.ag._({id:"2SnOmG",message:"Telugu"}),url:"https://te.khanacademy.org",countries:["IN"]}],["th",{languageName:r.ag._({id:"SUr44j",message:"Thai"}),url:"https://th.khanacademy.org",countries:["TH"]}],["tr",{languageName:r.ag._({id:"Kz91g/",message:"Turkish"}),url:"https://tr.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360037662392-T%C3%BCrk-tak%C4%B1m%C4%B1-The-Turkish-Team",countries:["TR","CY","MK","GR"]}],["uk",{languageName:r.ag._({id:"V9+2pH",message:"Ukrainian"}),url:"https://uk.khanacademy.org",countries:["UA"]}],["ur",{languageName:r.ag._({id:"tmwuH9",message:"Urdu"}),url:"https://ur.khanacademy.org",countries:["IN","PK"]}],["uz",{languageName:r.ag._({id:"b1dG47",message:"Uzbek"}),url:"https://uz.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360032219511",countries:["UZ"]}],["vi",{languageName:r.ag._({id:"fROFIL",message:"Vietnamese"}),url:"https://vi.khanacademy.org/",teamUrl:"https://support.khanacademy.org/hc/en-us/articles/360059513772-Nh%C3%B3m-Vi%E1%BB%87t-Nam-The-Vietnamese-Team",countries:["VN"]}],["xh",{languageName:r.ag._({id:"89WBNx",message:"Xhosa"}),url:"https://xh.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360024203131-isiXhosa-isiZulu-Xhosa-and-Zulu-team",countries:["ZA"]}],["zh-hans",{languageName:r.ag._({id:"6imsQS",message:"Chinese (Simplified)"}),url:"https://zh-hans.khanacademy.org/",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360012809592-%E7%AE%80%E4%BD%93%E4%B8%AD%E6%96%87%E6%96%87%E6%9C%AC%E7%BF%BB%E8%AF%91%E5%9B%A2%E9%98%9F-The-Simplified-Chinese-Translation-Team",countries:["CN","SG"]}],["zh-hant",{languageName:r.ag._({id:"DM4gBB",message:"Chinese (Traditional)"}),countries:["CN","HK","MO","TW"]}],["zu",{languageName:r.ag._({id:"+v7Dt7",message:"Zulu"}),url:"https://zu.khanacademy.org",teamUrl:"https://khanacademy.zendesk.com/hc/en-us/articles/360024203131-isiXhosa-isiZulu-Xhosa-and-Zulu-team",countries:["ZA"]}]])}},775567:function(e,t,n){n.d(t,{Zi:function(){return g},tR:function(){return d}});var r=n(707409),a=n(263214),i=n(847530),o=n(579562),s=n(808114),u=(0,r._)({},{eventType:"PagePerformanceCaptured",eventSchemaVersion:3,webVitalsCLS:null,webVitalsFID:null,webVitalsLCP:null,webVitalsFCP:null,webVitalsTTFB:null,webVitalsINP:null,pageLoadPageName:null,pageLoadSufficientlyUsable:null,pageLoadFullyInteractive:null,pageLoadFirstByte:null,routerPath:"",wasServerSideRendered:!1,isPhantom:!1}),c=!1,l=function(e){return e?("string"==typeof e&&(e=parseFloat(e)),e<=0||e>1e6)?null:e:null},d=function(){(0,a.NO)(function(e){var t=e.value;u.webVitalsLCP=l(t)}),(0,a.a4)(function(e){var t=e.value;u.webVitalsFCP=l(t)}),(0,a.mw)(function(e){var t=e.value;u.webVitalsCLS=l(t)}),(0,a.Fu)(function(e){var t=e.value;u.webVitalsFID=l(t)}),(0,a.Yn)(function(e){var t=e.value;u.webVitalsINP=l(t)}),(0,a.mr)(function(e){var t=e.value;u.webVitalsTTFB=l(t)})},g=function(e){if(!c){var t=window[(0,s.SB)()]||{};if(t){var n=t.pageName,r=t.sufficientlyUsable,a=t.fullyInteractive,d=t.firstByte;u.pageLoadPageName=n||null,u.pageLoadSufficientlyUsable=l(r),u.pageLoadFullyInteractive=l(a),u.pageLoadFirstByte=l(d)}u.routerPath=e,u.wasServerSideRendered=!1,u.isPhantom=i.C0.isPhantom,(0,o.x)(u),c=!0}}},212097:function(e,t,n){n.d(t,{Ob:()=>U,fy:()=>K,Mt:()=>z,sp:()=>H,on:()=>Z,O$:()=>Y,nv:()=>G,$S:()=>V,Ar:()=>F});var r,a,i=n("727412"),o=n("707409"),s=n("499282"),u=n("285665"),c=n("220773"),l=n.n(c),d=n("161930");let g=n.p+"images/9cdeb88d9466675c-Blooket_icon.svg";var m=n("945046"),f=n("123917"),h=n("895660"),p=n("302500"),v=n("410846"),y=n("530846"),_=n("812110"),w=n("201661"),C=n("903069"),S=n("594874"),k=n("19940"),I=n("150457"),b=n("832230"),A=n("614128"),E=n("483556"),T=n("598736"),x=n("815115"),D=n("334415"),L=n("273504"),P=n("807576"),N=n("920590"),R=n("998404"),O=n("344300"),j=n("459954"),B=n("852897"),M=n("953749");var G=((r={}).All="All Tools",r.Favorites="My Favorites",r.Plan="Plan",r.Create="Create",r.Differentiate="Differentiate",r.Support="Support",r.Learn="Learn",r);function U(e){switch(e){case"My Favorites":return u.ag._({id:"/+PQ0p",message:"My Favorites"});case"Plan":return u.ag._({id:"GdgCoi",message:"Plan"});case"Create":return u.ag._({id:"hYgDIe",message:"Create"});case"Differentiate":return u.ag._({id:"aBVFl3",message:"Differentiate"});case"Support":return u.ag._({id:"XYLcNv",message:"Support"});case"Learn":return u.ag._({id:"rjZpLn",message:"Learn"});default:return u.ag._({id:"g20SMS",message:"All Tools"})}}function Z(e){switch(e){case"My Favorites":return"MY_FAVORITES";case"Plan":return"PLAN";case"Create":return"CREATE";case"Differentiate":return"DIFFERENTIATE";case"Support":return"SUPPORT";case"Learn":return"LEARN";default:return"ALL"}}var F=((a={}).Blooket="Blooket",a.ChatOnly="ChatOnly",a.Coeditor="Coeditor",a.EditAssignment="EditAssignment",a),V=l()(function(){return[{urlSlug:"blooket-generator",configName:"teacher-tool-blooket-generator",title:u.ag._({id:"nuwdKq",message:"Blooket Generator"}),description:u.ag._({id:"Nj+Ngg",message:"Create Blooket questions on a variety of topics."}),categories:["Create"],icon:g,color:d.$_.fadedGreen24,layout:"Blooket",reportingLabelId:"multiple-choice-blooket"},{urlSlug:"chunk-text",configName:"teacher-tool-chunk-text",title:u.ag._({id:"CS/SbE",message:"Chunk Text"}),description:u.ag._({id:"tMBxOA",message:"Break complex texts into manageable sections for easier student comprehension."}),categories:["Differentiate","Create","Support"],icon:B,color:d.$_.fadedRed24,layout:"Coeditor",reportingLabelId:"chunk-text"},{urlSlug:"class-newsletter",configName:"teacher-tool-class-newsletter",title:u.ag._({id:"vbmUWQ",message:"Class Newsletter"}),description:u.ag._({id:"W50dNO",message:"Produce engaging newsletters to keep parents informed about class activities."}),categories:["Create"],icon:L,color:d.$_.fadedGreen24,layout:"Coeditor",activitySlug:"activity-write-class-newsletter",reportingLabelId:"write-class-newsletter"},{urlSlug:"class-snapshot",configName:"activity-class-snapshot",title:u.ag._({id:"EBVjqh",message:"Class Snapshot"}),description:u.ag._({id:"3gVo6T",message:"Review your students' performance and trends."}),categories:["Plan","Learn","Differentiate"],icon:y,color:d.$_.fadedPurple24,layout:"ChatOnly",activitySlug:"activity-class-snapshot",requireClassroomSelection:!0,reportingLabelId:"class-snapshot"},{urlSlug:"clear-directions",configName:"teacher-tool-clear-directions",title:u.ag._({id:"STbjD9",message:"Clear Directions"}),description:u.ag._({id:"Ga7ky/",message:"Generate concise, easy-to-follow instructions for assignments and activities."}),categories:["Create","Plan","Support"],icon:O,color:d.$_.fadedGreen24,layout:"Coeditor",reportingLabelId:"clear-directions"},{urlSlug:"discussion-prompts",configName:"teacher-tool-discussion-prompts",title:u.ag._({id:"qBRiWp",message:"Discussion Prompts"}),description:u.ag._({id:"8/3TIn",message:"Craft engaging prompts to stimulate meaningful classroom discussions."}),categories:["Plan","Create"],icon:w,color:d.$_.fadedPurple24,layout:"Coeditor",reportingLabelId:"discussion-prompts"},{urlSlug:"exit-ticket",configName:"teacher-tool-exit-ticket",title:u.ag._({id:"aCVoMU",message:"Exit Ticket"}),description:u.ag._({id:"3/zyuh",message:"Create quick end-of-lesson assessments to check student understanding."}),categories:["Plan","Create","Support"],icon:M,color:d.$_.fadedPurple24,layout:"Coeditor",extensionOrder:5,activitySlug:"activity-write-exit-ticket-questions",reportingLabelId:"write-exit-ticket"},{urlSlug:"fun-class-summary-poem",configName:"teacher-tool-fun-class-summary-poem",title:u.ag._({id:"lurblM",message:"Fun Class Summary Poem"}),description:u.ag._({id:"l9/Eie",message:"Transform memorable class moments into a creative poetic recap."}),categories:["Create"],icon:A,color:d.$_.fadedGreen24,layout:"Coeditor",activitySlug:"activity-create-class-summary-poem",reportingLabelId:"write-summary-poem"},{urlSlug:"iep-assistant",configName:"teacher-tool-iep-assistant",title:u.ag._({id:"L2iOam",message:"IEP Assistant"}),description:u.ag._({id:"ATszcS",message:"Streamline the creation of Individualized Education Plans."}),categories:["Support"],icon:j,color:d.$_.fadedBlue24,layout:"Coeditor",reportingLabelId:"iep-assistant",footer:u.ag._({id:"raPyFk",message:"Note: This output is a draft and does not constitute a complete or final IEP. It requires further refinement based on your professional judgment, evaluation, and analysis. Be sure that the final IEP is tailored to the student's specific needs and complies with all applicable school policies and legal requirements."})},{urlSlug:"informational-text",configName:"teacher-tool-informational-text",title:u.ag._({id:"PABCoQ",message:"Informational Text"}),description:u.ag._({id:"+5oSbW",message:"Create informational text for a variety of topics."}),categories:["Create","Differentiate"],icon:p,color:d.$_.fadedGreen24,layout:"Coeditor",reportingLabelId:"informational-text"},{urlSlug:"learning-objectives",configName:"teacher-tool-learning-objectives",title:u.ag._({id:"2eGv97",message:"Learning Objective(s)"}),description:u.ag._({id:"fhWySS",message:"Develop clear, measurable learning objectives to guide instruction."}),categories:["Plan","Create","Support"],icon:D,color:d.$_.fadedPurple24,layout:"Coeditor",activitySlug:"activity-write-learning-objectives",reportingLabelId:"write-learning-objectives"},{urlSlug:"lesson-hook",configName:"teacher-tool-lesson-hook",title:u.ag._({id:"yz86U+",message:"Lesson Hook"}),description:u.ag._({id:"dNLWvw",message:"Plan compelling lesson starters to engage students."}),categories:["Plan","Create"],icon:f,color:d.$_.fadedPurple24,layout:"Coeditor",activitySlug:"activity-create-a-lesson-hook",reportingLabelId:"create-lesson-hook"},{urlSlug:"lesson-plan",configName:"teacher-tool-create-lesson-plan",title:u.ag._({id:"7VH3iq",message:"Lesson Plan"}),description:u.ag._({id:"jUgF81",message:"Create structured, detailed lesson plans tailored to your curriculum and students' needs."}),categories:["Plan","Create"],icon:P,color:d.$_.fadedPurple24,layout:"Coeditor",extensionOrder:3,activitySlug:"activity-create-lesson-plan",reportingLabelId:"create-lesson-plan"},{urlSlug:"letter-of-recommendation",configName:"teacher-tool-letter-of-recommendation",title:u.ag._({id:"T/DpUW",message:"Letter of Recommendation"}),description:u.ag._({id:"uR2rux",message:"Create personalized letters of recommendation."}),categories:["Create"],icon:I,color:d.$_.fadedGreen24,layout:"Coeditor",activitySlug:"activity-write-recommendation-letter",reportingLabelId:"write-recommendation-letter"},{urlSlug:"leveler",configName:"teacher-tool-leveler",title:u.ag._({id:"lOyyM+",message:"Leveler"}),description:u.ag._({id:"QlT8fo",message:"Adjust the complexity of a given text."}),categories:["Differentiate","Create","Support"],icon:N,color:d.$_.fadedRed24,layout:"Coeditor",reportingLabelId:"text-levler"},{urlSlug:"make-it-relevant",configName:"teacher-tool-make-it-relevant",title:u.ag._({id:"3kaL7s",message:"Make it Relevant!"}),description:u.ag._({id:"digxmc",message:"Link lesson content to students' lives and interests to boost engagement."}),categories:["Differentiate","Support"],icon:x,color:d.$_.fadedRed24,layout:"Coeditor",reportingLabelId:"make-it-relevant"},{urlSlug:"multiple-choice-quiz",configName:"teacher-tool-multiple-choice-quiz",title:u.ag._({id:"FPglUm",message:"Multiple Choice Quiz"}),description:u.ag._({id:"/M65nx",message:"Create multiple-choice quizzes on a variety of topics."}),categories:["Create","Plan"],icon:C,color:d.$_.fadedGreen24,layout:"Coeditor",reportingLabelId:"multiple-choice-assessment"},{urlSlug:"questions-generator",configName:"teacher-tool-questions-generator",title:u.ag._({id:"+g7tug",message:"Questions Generator"}),description:u.ag._({id:"/WQtks",message:"Create questions for a specific piece of content."}),categories:["Create","Plan"],icon:R,color:d.$_.fadedGreen24,layout:"Coeditor",reportingLabelId:"questions-generator"},{urlSlug:"real-world-context-generator",configName:"teacher-tool-real-world-context-generator",title:u.ag._({id:"uyfMbO",message:"Real World Context Generator"}),description:u.ag._({id:"UkRw+r",message:"Connect lesson topics to engaging real-world examples and applications."}),categories:["Differentiate","Create","Support"],icon:E,color:d.$_.fadedRed24,layout:"Coeditor",reportingLabelId:"real-world-context-generator"},{urlSlug:"recommend-assignments",configName:"activity-assignment-recommendations",title:u.ag._({id:"5wpHZE",message:"Recommend Assignments"}),description:u.ag._({id:"8FGeto",message:"Receive recommendations on what your students should work on next."}),categories:["Plan","Learn","Differentiate"],icon:T,color:d.$_.fadedPurple24,layout:"ChatOnly",activitySlug:"activity-assignment-recommendations",requireClassroomSelection:!0,reportingLabelId:"assignment-recommendations"},{urlSlug:"refresh-my-knowledge",configName:"activity-refresh-my-knowledge",title:u.ag._({id:"BMaOsq",message:"Refresh My Knowledge"}),description:u.ag._({id:"4sNijO",message:"Refresh your content knowledge in various subject areas."}),categories:["Learn"],icon:v,color:d.$_.fadedGold24,layout:"ChatOnly",extensionOrder:2,activitySlug:"activity-refresh-my-knowledge",reportingLabelId:"refresh-my-knowledge-teacher"},{urlSlug:"report-card-comments",configName:"teacher-tool-report-card-comments",title:u.ag._({id:"Av4Quo",message:"Report Card Comments"}),description:u.ag._({id:"eywkhV",message:"Generate personalized, constructive report card comments."}),categories:["Create","Support"],icon:b,color:d.$_.fadedGreen24,layout:"Coeditor",reportingLabelId:"report-card-comments"},{urlSlug:"rubric-generator",configName:"activity-create-a-rubric",title:u.ag._({id:"SUMESK",message:"Rubric Generator"}),description:u.ag._({id:"tyElK2",message:"Design clear, detailed grading rubrics to set expectations and simplify scoring."}),categories:["Create","Plan"],icon:S,color:d.$_.fadedGreen24,layout:"ChatOnly",extensionOrder:4,activitySlug:"activity-create-a-rubric",reportingLabelId:"co-create-rubric"},{urlSlug:"smart-goal-writer",configName:"teacher-tool-smart-goal-writer",title:u.ag._({id:"Zwepwv",message:"SMART Goal Writer"}),description:u.ag._({id:"4Elzs6",message:"Create specific, measurable, achievable, relevant, and time-bound goals."}),categories:["Support"],icon:m,color:d.$_.fadedBlue24,layout:"Coeditor",reportingLabelId:"smart-goal-writer"},{urlSlug:"summarize-student-chat-history",configName:"activity-get-chat-summary-for-teacher",title:u.ag._({id:"mG3XdJ",message:"Summarize Student Chat History"}),description:u.ag._({id:"loyiva",message:"Gain insights from compiled summaries of student Khanmigo chats."}),categories:["Support","Learn"],icon:k,color:d.$_.fadedBlue24,layout:"ChatOnly",activitySlug:"activity-get-chat-summary-for-teacher",requireClassroomSelection:!0,reportingLabelId:"summarize-chat-history-teacher"},{urlSlug:"text-rewriter",configName:"teacher-tool-text-rewriter",title:u.ag._({id:"7tCbFU",message:"Text Rewriter"}),description:u.ag._({id:"Kjd5mW",message:"Customize text to meet your instructional needs."}),categories:["Differentiate","Create","Support"],icon:h,color:d.$_.fadedRed24,layout:"Coeditor",reportingLabelId:"text-rewriter"},{urlSlug:"chat-with-gpt",configName:"activity-chat-with-gpt",title:u.ag._({id:"8y87Qt",message:"Chat with GPT"}),description:u.ag._({id:"v6tFeC",message:"Have a conversation with the GPT-4o mini model."}),categories:["Learn"],icon:_,color:d.$_.fadedGold24,layout:"ChatOnly",extensionOrder:1,activitySlug:"activity-chat-with-gpt",reportingLabelId:"chat-with-gpt4-teacher"}]}),K=function(){return V().reduce(function(e,t){return(0,s._)((0,o._)({},e),(0,i._)({},t.configName,t))},{})},z=function(){return V().reduce(function(e,t){return(0,s._)((0,o._)({},e),(0,i._)({},t.urlSlug,t))},{})},H=function(){return V().reduce(function(e,t){return t.activitySlug?(0,s._)((0,o._)({},e),(0,i._)({},t.activitySlug,t)):e},{})},Y=function(){return V().filter(function(e){return void 0!==e.extensionOrder}).sort(function(e,t){return e.extensionOrder-t.extensionOrder})}},168895:function(e,t,n){n.d(t,{fI:function(){return u},hn:function(){return o},i5:function(){return s},rP:function(){return i}});var r=n(404103),a=n(212097),i=function(e){return!!o(e)},o=function(e){var t,n=(0,r.LX)(e,"".concat(s,"/:tool")),i=null==n?void 0:n.params.tool;return i?null!==(t=(0,a.Mt)()[i])&&void 0!==t?t:null:null},s="/teacher/khanmigo-tools",u=function(e){var t,n=null===(t=(0,a.sp)()[e])||void 0===t?void 0:t.urlSlug;return n?"".concat(s,"/").concat(n):null}},2880:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(676150),a=n(707409),i=n(281964),o=n(816364),s=n(667294),u=n(635720);n(323658),n(91839);var c=n(922751),l=n(765311);let d=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.freeze({}),n=t.curriculum,d=t.module,g=t.targetLocale,m=(0,u.tm)(),f=(0,i._)(s.useState(null),2),h=f[0],p=f[1],v=(0,c.r)(),y=s.useRef(null),_=(0,l.r)(),w=s.useCallback(function(t,i){var s,u=v(e,t,(0,a._)({curriculum:n,module:d,targetLocale:g},i));if(null!=y.current&&y.current.id===u){var c=y.current.result;return c}m()&&p({status:"loading"});var l=(s=(0,r._)(function(){var r;return(0,o.Jh)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,_(e,{variables:null!=t?t:void 0,context:(0,a._)({curriculum:n,module:d,targetLocale:g},i)})];case 1:return[2,{status:"success",data:o.sent()}];case 2:return[2,"AbortError"===(r=o.sent()).name?{status:"aborted"}:{status:"error",error:r}];case 3:return[2]}})}),function(){return s.apply(this,arguments)})().then(function(e){var t;return(null===(t=y.current)||void 0===t?void 0:t.id)===u&&(y.current=null,m()&&p(e)),e});return y.current={id:u,result:l},l},[_,e,n,d,g,v,m]);return s.useMemo(function(){return[w,h]},[w,h])}},103181:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(281964),a=n(667294),i=n(229500),o=n(380898);let s=function(){var e=(0,r._)(a.useState(!0),2),t=e[0],n=e[1],s=(0,o.Z)(),u="success"===s.status?s.profile:null;return a.useEffect(function(){n((0,i.f)(u))},[u]),t}},764038:function(e,t,n){n.d(t,{v:function(){return i},x:function(){return a}});var r=(0,n(46073).createEvent)("guide-audio-stream")(),a=r.useGuideAudioStreamListener,i=r.emitGuideAudioStream},17899:function(e,t,n){n.d(t,{K:function(){return i},N:function(){return a}});var r=(0,n(46073).createEvent)("guide-command")(),a=r.useGuideCommandListener,i=r.emitGuideCommand},240479:function(e,t,n){n.d(t,{A:function(){return a},l:function(){return i}});var r=(0,n(46073).createEvent)("message-sent")(),a=r.useMessageSentListener,i=r.emitMessageSent},55745:function(e,t,n){n.d(t,{Y:function(){return a}});var r,a=((r={}).DefaultLearner="activity-default-learner",r.DefaultTeacher="activity-default-teacher",r.DefaultParent="activity-default-parent",r.ChatWithHistoricalFigure="activity-chat-with-historical-figure",r.ClassSnapshot="activity-class-snapshot",r.AssignmentRecommendations="activity-assignment-recommendations",r.ChatSummaryTeacher="activity-get-chat-summary-for-teacher",r.ChatSummaryParent="activity-get-chat-summary-for-parent",r.WriteClassNewsletter="activity-write-class-newsletter",r.WriteRecommendationLetter="activity-write-recommendation-letter",r.AcademicEssayFeedback="activity-academic-essay-feedback",r.EssayFeedbackPitfalls="activity-essay-feedback-pitfalls",r.PersonalizeInterests="activity-personalize-interests",r.TutorMeStem="activity-tutor-me-stem",r)},635011:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(667294),a=n(157815);let i=function(){return(0,r.useContext)(a.S)}},157815:function(e,t,n){n.d(t,{S:function(){return i},x:function(){return a}});var r=n(667294),a=(0,r.createContext)({editor:null,open:!1,currentPlaceholderKey:"",readOnly:!1,documentTitle:"",isKhanmigoTyping:!1}),i=(0,r.createContext)({reset:function(){},setReadOnly:function(){},setDocumentTitle:function(){},restoreSnapshot:function(){}})},155232:function(e,t,n){n.d(t,{$V:function(){return I},AT:function(){return f},Fy:function(){return b},G7:function(){return i},GA:function(){return a},GF:function(){return g},QY:function(){return C},R0:function(){return k},Rb:function(){return o},Rr:function(){return y},Tn:function(){return w},Uo:function(){return m},iU:function(){return s},mu:function(){return l},o8:function(){return _},sW:function(){return c},vS:function(){return S},xw:function(){return u}});var r=n(232618),a="coediting/edit",i="coediting/event",o="coediting/create-pptx-response",s="coediting/request-edit",u="coediting/request-insert",c="coediting/get-suggestions",l="coediting/create-pptx-request",d="coeditStarted",g="coeditPrefix",m="coeditSelection",f="coeditSuffix",h="coeditMatchedTrigger",p="coeditPaused",v="coeditInitialCompletionFinished",y=function(e,t,n){(0,r.oj)(g,e),(0,r.oj)(m,t),(0,r.oj)(f,n)},_=function(){(0,r.oj)(d,void 0),(0,r.oj)(h,void 0),(0,r.oj)(g,void 0),(0,r.oj)(p,void 0),(0,r.oj)(m,void 0),(0,r.oj)(f,void 0),(0,r.oj)(v,void 0)},w=function(){return{started:(0,r.Dl)(d),prefix:(0,r.Dl)(g),selection:(0,r.Dl)(m),suffix:(0,r.Dl)(f)}},C=function(e){e?(0,r.oj)(d,"1"):(0,r.oj)(d,null)},S=function(e){e?(0,r.oj)(h,"1"):(0,r.oj)(h,null)},k=function(e){e?(0,r.oj)(p,"1"):(0,r.oj)(p,null)},I=function(){(0,r.oj)(v,"1")},b=function(e){(0,r.oj)("coeditSelectedTemplate",e)}},775954:function(e,t,n){n.d(t,{O7:function(){return i},Si:function(){return s},ZT:function(){return o},bo:function(){return a}});var r=new Map,a=function(e,t){null==t?o(e):r.set(e,t)},i=function(e){return r.get(e)},o=function(e){r.delete(e)},s=function(e){e?e.forEach(o):r.clear()}},539266:function(e,t,n){n.d(t,{m:function(){return i}});var r=n(667294),a=n(885001),i=function(){return(0,r.useContext)(a.J)}},973495:function(e,t,n){n.d(t,{y:function(){return i}});var r=n(667294),a=n(301555),i=function(){return(0,r.useContext)(a.I)}},270291:function(e,t,n){n.d(t,{O:function(){return i}});var r=n(635720),a=n(593415),i=function(e,t){(0,r.xM)(function(){return a.on("changed",function(n){n===e&&t(a.latest())})})}},124941:function(e,t,n){n.d(t,{H:function(){return c}});var r=n(676150),a=n(816364),i=n(667294),o=n(323658),s=n(593415),u=n(157404),c=function(){var e=(0,u.Q)();return(0,i.useCallback)(function(){if(s.latest().initialized)return Promise.resolve();var t,n=s.latest().initializationPromise;if(n)return n;return n=(t=(0,r._)(function(){var t;return(0,a.Jh)(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,3,4]),s.set("isLoading",!0),[4,e("initial_load",{})];case 1:return n.sent(),s.set("initialized",!0),[3,4];case 2:return t=n.sent(),o.ZP.error("Failed to send initial_load event to ai-guide.",o.D1.TransientKhanService,{cause:t}),[3,4];case 3:return s.set("isLoading",!1),s.set("initializationPromise",null),[7];case 4:return[2]}})}),function(){return t.apply(this,arguments)})(),s.set("initializationPromise",n),n},[e])}},691506:function(e,t,n){n.d(t,{c:function(){return g}});var r=n(667294),a=n(635011),i=n(155232),o=n(775954),s=n(593415),u=n(605110),c=n(679202),l=n(539266),d=n(124941),g=function(){var e=(0,d.H)(),t=(0,l.m)(),n=t.setAudioCache,g=t.stop,m=(0,a.Z)().reset;return(0,r.useCallback)(function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.TL(),g(),n(new u.k),s.set("conversation",[]),s.set("threadId",null),s.set("ratedInteractions",new Map),(0,o.ZT)("notificationConversation"),m(),(0,i.o8)(),s.set("essaySessionId",null),s.set("initializationPromise",null),s.set("initialized",!1),t?e():Promise.resolve()},[m,g,e,n])}},2765:function(e,t,n){n.d(t,{SE:function(){return v},cb:function(){return y},lv:function(){return _}});var r=n(676150),a=n(816364),i=n(285665),o=n(667294),s=n(404103),u=n(323658),c=n(579562),l=n(593415),d=n(167114),g=n(232618),m=n(694415),f=n(863364),h=n(124941),p=n(157404),v=new u.jc("cannot resume a thread you do not own",u.D1.Unauthorized),y=new u.jc("an error occurred while resuming the conversation",u.D1.Internal),_=function(){var e,t=(0,p.Q)(),n=(0,m.M)(),y=(0,h.H)(),_=(0,s.TH)().search,w=(0,s.k6)();return(0,o.useCallback)((e=(0,r._)(function(e){var r,o,s;return(0,a.Jh)(this,function(a){switch(a.label){case 0:(r=l.latest().threadId)&&n(r),l.set("threadId",e),l.set("conversation",[]),l.set("isLoading",!0),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,t("resume_conversation",{onResponseComplete:function(e){var t=e.conversation,n=e.feedbackMap,r=e.restoredPromptVariables;r&&(0,g.cU)(r),l.set("conversation",t),l.set("ratedInteractions",null!=n?n:new Map)}})];case 2:return a.sent(),[3,5];case 3:if((o=a.sent())===v)return(s=new URLSearchParams(_)).delete("resumeThreadId"),w.replace({search:s.toString()}),y(),[2];return l.set("conversation",(0,d.v)([],i.ag._({id:"8w5L2z",message:"An error occurred while resuming this conversation. Refresh the page to try again, or start a new chat."}),[{label:i.ag._({id:"vPF04k",message:"Start a new chat"}),command:"newChat",actions:[{actionType:f.Us.newChat,parameters:{}}]}])),u.ZP.error("Failed to send resume_conversation event to ai-guide.",u.D1.TransientKhanService,{cause:o}),[3,5];case 4:return l.set("isLoading",!1),[7];case 5:return l.set("initialized",!0),(0,c.x)({eventType:"AiGuideChatHistoryConversationResumed",eventSchemaVersion:1,aiGuideThreadId:e,aiGuideNavigationId:l.latest().navigation.id}),[2]}})}),function(t){return e.apply(this,arguments)}),[t,n,y,w,_])}},157404:function(e,t,n){n.d(t,{Q:function(){return i}});var r=n(667294),a=n(122658),i=function(){var e=(0,a.k)();return(0,r.useCallback)(function(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e("event",{event:{name:t,params:null!==(n=r.params)&&void 0!==n?n:{}}},{customPrompt:r.customPrompt,onResponseComplete:r.onResponseComplete})},[e])}},167114:function(e,t,n){n.d(t,{v:function(){return s}});var r=n(707409),a=n(499282),i=n(340379),o=n(453955),s=function(e,t,n){var s=e[e.length-1],u={type:"incoming",text:t,user:"Teacher",uiOnly:!0,serverOnly:!1,interactionId:"",isError:!0,actionBubbles:n};if(null==s?void 0:s.isGeneratingResponse){var c=new Map(s.actionStatusMap);return c.set(o.B.TEXT,o.d.ERROR),(0,i._)(e.slice(0,-1)).concat([(0,a._)((0,r._)({},s),{isGeneratingResponse:!1,actionStatusMap:c}),u])}return(0,i._)(e).concat([u])}},605110:function(e,t,n){n.d(t,{k:function(){return o}});var r=n(208014),a=n(343830),i=n(467696),o=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,a._)(this,t),(0,r._)(this,t,[e])}return(0,i._)(t,e),t}((0,n(875533)._)(Map))},712412:function(e,t,n){n.d(t,{c:function(){return a}});var r=n(863364),a=function(e){return e?(null==e?void 0:e.get("hasAccessToAIGuideDistrictAdmin"))?r.Yc.DistrictAdmin:(null==e?void 0:e.get("hasAccessToAIGuideTeacher"))?r.Yc.Teacher:(null==e?void 0:e.get("hasAccessToAIGuideParent"))?r.Yc.Parent:r.Yc.Student:r.Yc.Student}},930928:function(e,t,n){n.d(t,{I:function(){return a}});var r=n(404103),a=function(e){var t,n=(0,r.LX)(e,"/profile/me/khanmigo/activities/:activitySlug/:activitySubRouteSlug?");return null!==(t=null==n?void 0:n.params.activitySlug)&&void 0!==t?t:null}},885001:function(e,t,n){n.d(t,{J:function(){return i}});var r=n(667294),a=Object.freeze({audioCache:new(n(605110)).k,audioKey:"",isPlaying:!1,isTextToSpeechSupported:!1,isVoiceOn:!1,pause:function(){},play:function(){},selectedVoice:null,setAudioCache:function(){},setIsVoiceOn:function(){},setSelectedVoice:function(){},stop:function(){},chunkIndex:0}),i=r.createContext(a);i.displayName="GuideAudioContext"},301555:function(e,t,n){n.d(t,{E:function(){return a},I:function(){return o}});var r=n(667294),a={readingLevel:"LOW",guideLanguageCode:"en",guideVoiceDescriptor:null,showDABs:null},i=Object.freeze({isLoading:!1,preferences:a,refetchPreferences:function(){},setPreferences:function(){return Promise.resolve()}}),o=r.createContext(i);o.displayName="GuidePreferencesContext"},575618:function(e,t,n){n.d(t,{G5:function(){return u},Vu:function(){return c},o8:function(){return l},qB:function(){return s}});var r=n(569051),a=n(55745),i=n(863364),o=n(930928),s=function(e){return(0,r.fQ)((0,o.I)(e))},u=function(e){return l(e,i.Yc.Teacher)},c=function(e){return l(e,i.Yc.Parent)},l=function(e,t){switch(t){case i.Yc.Teacher:return(0,o.I)(e)===a.Y.DefaultTeacher;case i.Yc.Parent:return(0,o.I)(e)===a.Y.DefaultParent;default:return!1}}},858186:function(e,t,n){n.d(t,{b:function(){return i},t:function(){return a}});var r=n(667294),a=r.createContext({openKeypadID:null,isAnyActive:!1,sendMessage:function(){}}),i=r.createContext({setOpenKeypadID:function(){},setActiveInputs:function(){},setSendMessage:function(){}})},563433:function(e,t,n){n.d(t,{U:function(){return i}});var r=n(863364),a=n(575618),i=function(e,t,n){var i=null==e?void 0:e.get("hasAccessToAIGuideTeacher"),o=null==e?void 0:e.get("hasAccessToAIGuideParent");if(!!i||!!o){var s=i?r.Yc.Teacher:r.Yc.Parent;return(0,a.qB)(t)&&!(0,a.o8)(t,s)?s:n?r.Yc.Student:s}}},34136:function(e,t,n){n.d(t,{v:function(){return a},y:function(){return i}});var r=n(667294),a=(0,r.createContext)(!1);a.displayName="MobileIconMenuContext";var i=(0,r.createContext)(function(){throw Error("Must be used within MobileIconMenuContextProvider.")})},147749:function(e,t,n){n.d(t,{C:function(){return o}});var r,a=n(676150),i=n(816364);var o=(r=(0,a._)(function(e,t,n){var r,a,o,s,u,c,l,d,g,m,f,h,p,v,y;return(0,i.Jh)(this,function(i){switch(i.label){case 0:r="",a=!1,o=new TextDecoder,i.label=1;case 1:return[4,e.read()];case 2:if(u=(s=i.sent()).done,c=s.value,!a&&(a=!0,null==n||n()),u||!c)return[3,3];l=o.decode(c),r+=l,d=r.split("\n"),g=!0,m=!1,f=void 0;try{for(h=d[Symbol.iterator]();!(g=(p=h.next()).done);g=!0){if(!!(v=p.value))try{y=JSON.parse(v),t(y),r=""}catch(e){if("SyntaxError"!==e.name)throw e;r=v}}}catch(e){m=!0,f=e}finally{try{!g&&null!=h.return&&h.return()}finally{if(m)throw f}}return[3,1];case 3:return[2]}})}),function(e,t,n){return r.apply(this,arguments)})},57702:function(e,t,n){n.d(t,{a:function(){return o}});var r=n(579562),a=n(593415),i=n(86507);function o(e){var t=e.pathname,n=e.newNavigationId,o=e.product,s=e.browserExtensionURLBeingUsedOn;(0,r.x)({eventType:"AiGuideProductPageNavigated",eventSchemaVersion:3,aiGuideNavigationId:n,currentPageURL:t,isAiGuideOpen:a.latest().open,isAiGuideEnabled:!(0,i.l)(t),browserExtensionURLBeingUsedOn:void 0===s?null:s,product:void 0===o?null:o})}},679202:function(e,t,n){n.d(t,{TL:function(){return s},Zw:function(){return o},j:function(){return i}});var r=n(340379),a=[],i=function(){var e=new AbortController;return a.push(e),e},o=function(e){a=a.filter(function(t){return t!==e})},s=function(){var e=(0,r._)(a);a=[],e.forEach(function(e){e.abort()})}},453955:function(e,t,n){n.d(t,{B:function(){return i},d:function(){return o}});var r,a,i=((r={}).DYNAMIC_ACTION_BUBBLES="DYNAMIC_ACTION_BUBBLES",r.AUDIO="AUDIO",r.TEXT="TEXT",r);var o=((a={}).LOADING="LOADING",a.SUCCESS="SUCCESS",a.ERROR="ERROR",a)},94525:function(e,t,n){n.d(t,{q:function(){return i}});var r=n(340379),a=n(885498),i=function(e){var t=e.answer,n=e.conversation,i=e.interactionId,o=e.actionStatusMap;if((0,a.ZP)(t.trim()).some(function(e){var t=e.type,n=e.hasStartDelimiter;return"text"===t&&n}))return n;var s=0===n.length?null:n[n.length-1];if((null==s?void 0:s.type)==="incoming"&&s.interactionId===i&&!(null==s?void 0:s.isGeneratingResponse))return n;var u=(null==s?void 0:s.isGeneratingResponse)?n.slice(0,-1):n;return(0,r._)(u).concat([{type:"incoming",text:t,user:"Teacher",uiOnly:!0,serverOnly:!1,interactionId:i,isGeneratingResponse:!0,actionStatusMap:o}])}},73250:function(e,t,n){n.d(t,{z:()=>l,d:()=>d});var r,a=n("676150"),i=n("281964"),o=n("816364"),s=n("667294"),u=n("624073"),c={"lmnt:khanmigo-m-1:en":{welcome:"Hello I'm Khanmigo. I use artificial intelligence to help you learn on Khan Academy.",error:"Sorry, I am experiencing technical problems. Please try again later."},"lmnt:khanmigo-f-2:en":{welcome:"Hello I'm Khanmigo. I use artificial intelligence to help you learn on Khan Academy.",error:"Sorry, I am experiencing technical problems. Please try again later."},"lmnt:khanmigo-nb-2:en":{welcome:"Hello I'm Khanmigo. I use artificial intelligence to help you learn on Khan Academy.",error:"Sorry, I am experiencing technical problems. Please try again later."},"lmnt:khanmigo-m-1:es":{welcome:"Hola soy Khanmigo. Utilizo inteligencia artificial para ayudarte a aprender en Khan Academy.",error:"Lo siento, estoy teniendo problemas t\xe9cnicos. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."},"lmnt:khanmigo-f-2:es":{welcome:"Hola soy Khanmigo. Utilizo inteligencia artificial para ayudarte a aprender en Khan Academy.",error:"Lo siento, estoy teniendo problemas t\xe9cnicos. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."},"lmnt:khanmigo-nb-2:es":{welcome:"Hola soy Khanmigo. Utilizo inteligencia artificial para ayudarte a aprender en Khan Academy.",error:"Lo siento, estoy teniendo problemas t\xe9cnicos. Por favor, int\xe9ntelo de nuevo m\xe1s tarde."},"lmnt:khanmigo-m-1:pt":{welcome:"Ol\xe1, meu nome \xe9 Khanmigo. Eu uso intelig\xeancia artificial para ajudar voc\xea a aprender na Khan Academy.",error:"Desculpe, estou enfrentando problemas t\xe9cnicos. Por favor, tente novamente mais tarde."},"lmnt:khanmigo-f-2:pt":{welcome:"Ol\xe1, meu nome \xe9 Khanmigo. Eu uso intelig\xeancia artificial para ajudar voc\xea a aprender na Khan Academy.",error:"Desculpe, estou enfrentando problemas t\xe9cnicos. Por favor, tente novamente mais tarde."},"lmnt:khanmigo-nb-2:pt":{welcome:"Ol\xe1, meu nome \xe9 Khanmigo. Eu uso intelig\xeancia artificial para ajudar voc\xea a aprender na Khan Academy.",error:"Desculpe, estou enfrentando problemas t\xe9cnicos. Por favor, tente novamente mais tarde."}},l=function(e){var t,n=(0,i._)((0,s.useState)(0),2),r=n[0],a=n[1],o=(0,i._)((0,s.useState)(""),2),u=o[0],l=o[1],m=(0,i._)((0,s.useState)(!1),2),f=m[0],h=m[1],p=(0,s.useRef)(new Audio),v=(0,s.useRef)([]),y=(0,s.useRef)(Promise.resolve());v.current=null!==(t=e.get(u))&&void 0!==t?t:[];var _=(0,s.useCallback)(function(){h(!1),y.current.then(function(){p.current.pause()})},[]),w=(0,s.useCallback)(function(){_(),a(0),l(""),p.current.currentTime=0},[_]),C=(0,s.useCallback)(function(t){l(function(n){if(n===t)return p.current.play(),n;a(0),c.hasOwnProperty(t)&&d(t,"welcome").then(function(e){y.current.then(function(){y.current=g(p.current,e)})});var r,i=null===(r=e.get(t))||void 0===r?void 0:r[0];return i&&y.current.then(function(){y.current=g(p.current,i)}),t})},[e]);return(0,s.useEffect)(function(){var e=p.current,t=function(){a(function(e){var t=(e+1)%v.current.length;return!t&&w(),t})},n=function(){return h(!0)};return e.addEventListener("ended",t),e.addEventListener("play",n),function(){e.removeEventListener("ended",t),e.removeEventListener("play",n)}},[u,w]),(0,s.useEffect)(function(){if(0===r)return;var e=v.current[r];if(!!e)y.current.then(function(){y.current=g(p.current,e)})},[r]),(0,s.useMemo)(function(){return{audioKey:u,chunkIndex:r,isPlaying:f,pause:_,play:C,stop:w}},[u,f,C,_,w,r])};var d=(r=(0,a._)(function(e,t){return(0,o.Jh)(this,function(n){switch(n.label){case 0:return[4,fetch((0,u.Z)("/sounds/khanmigo/audio_samples/".concat(t,"/").concat(e,".txt"))).then(function(e){return e.text()})];case 1:return[2,{base64Audio:n.sent(),transcript:c[e][t]}]}})}),function(e,t){return r.apply(this,arguments)}),g=function(e,t){return t.base64Audio?(e.src="data:audio/wav;base64,".concat(t.base64Audio),e.play()):Promise.resolve()}},296886:function(e,t,n){n.d(t,{Hc:function(){return l},bR:function(){return c}});var r=n(398848),a=n(340379),i=n(667294),o=n(764038),s=n(539266),u=n(605110),c="stream_audio_key",l=function(){var e=(0,s.m)(),t=e.audioCache,n=e.audioKey,l=e.isVoiceOn,g=e.play,m=e.setAudioCache,f=e.stop,h=(0,i.useMemo)(function(){var e;return null!==(e=t.get(c))&&void 0!==e?e:[]},[t]);(0,o.x)(function(e){if("isComplete"in e){if(e.isComplete){l&&g(c);return}}else{if(!e.base64Audio)return;m(function(t){var i,o=e.isInitialChunk,s=(0,r._)(e,["isInitialChunk"]),l=o?[]:null!==(i=t.get(c))&&void 0!==i?i:[];(o||n!==c)&&f();var d=(0,a._)(l).concat([s]);return new u.k(t).set(c,d)})}}),(0,i.useEffect)(function(){d(h)&&g(c)},[h,g]);var p=n===c;(0,i.useEffect)(function(){if(p&&!l){f();return}},[p,f,l])},d=function(e){var t=0,n=!0,r=!1,a=void 0;try{for(var i,o=e[Symbol.iterator]();!(n=(i=o.next()).done);n=!0){var s=i.value;if((t+=s.transcript.length)>=70)return!0}}catch(e){r=!0,a=e}finally{try{!n&&null!=o.return&&o.return()}finally{if(r)throw a}}return!1}},122658:function(e,t,n){n.d(t,{k:()=>eh});var r,a,i=n("676150"),o=n("41196"),s=n("816364"),u=n("287840"),c=n("285665"),l=n("493096"),d=n.n(l),g=n("667294"),m=n("305505"),f=n("380898"),h=n("563433");function p(){return/CrOS/.test(navigator.userAgent)}var v=n("9713"),y=n("323658"),_=n("381758"),w=n("579562"),C=n("198303"),S=n("593415"),k=n("539266"),I=n("973495"),b=n("2765"),A=n("232618"),E=n("167114"),T=n("992844"),x=n("240479"),D=n("147749"),L=n("453955");var P=(r=(0,i._)(function(e,t,n){var r,a,i,o,u,c,l,d;return(0,s.Jh)(this,function(s){switch(s.label){case 0:return r=t.onAnswer,a=t.onAudio,i=t.onMetadata,o=t.onStopId,u=t.onCommand,c=t.onActionStatus,l="",d=Date.now(),[4,(0,D.C)(e,function(e){switch(e.type){case"stop-id":try{o(e.data.interaction_id)}catch(e){throw new y.jc("Error handling stop-id stream data",y.D1.Internal,{cause:e})}break;case"command-stream":try{u(e.data.name,e.data.content)}catch(e){throw new y.jc("Error handling command-stream stream data",y.D1.Internal,{cause:e})}break;case"text-stream":try{if(e.data.text){var t,n,s=Date.now(),g=s-d;d=s,l+=e.data.text,r(l,g)}}catch(e){throw new y.jc("Error handling text-stream stream data",y.D1.Internal,{cause:e})}break;case"text-stream-end":try{c(L.B.TEXT,L.d.SUCCESS)}catch(e){throw new y.jc("Error handling text-stream-end stream data",y.D1.Internal,{cause:e})}break;case"audio-stream":try{a({base64Audio:null!==(t=e.data.base64_audio)&&void 0!==t?t:"",transcript:null!==(n=e.data.transcript)&&void 0!==n?n:""})}catch(e){throw new y.jc("Error handling audio-stream stream data",y.D1.Internal,{cause:e})}break;case"audio-stream-error":try{a({error:new y.jc(e.data.debugMessage,y.D1.Internal)})}catch(e){throw new y.jc("Error handling audio-stream-error stream data",y.D1.Internal,{cause:e})}break;case"metadata":try{i({threadId:e.data.thread_id,interactionId:e.data.interaction_id,conversation:e.data.conversation,conversationEntries:e.data.conversation_entries,remainingQuota:e.data.quota_remaining_percent,feedbackMap:e.data.feedback_map?new Map(Object.entries(e.data.feedback_map)):void 0,restoredPromptVariables:e.data.restored_prompt_variables})}catch(e){throw new y.jc("Error handling metadata stream data",y.D1.Internal,{cause:e})}break;case"action-status-stream":try{var m=e.data,f=m.action,h=m.status;c(f,h)}catch(e){throw new y.jc("Error handling action stream data",y.D1.Internal,{cause:e})}}},n)];case 1:return s.sent(),[2]}})}),function(e,t,n){return r.apply(this,arguments)});var N=(a=(0,i._)(function(e,t,n,r){var a,i,u,c,l,d,g,m;return(0,s.Jh)(this,function(s){switch(s.label){case 0:a=e.command,i=e.commandObject,u=e.event,c=e.botName,l=new URLSearchParams({messageType:a}),u&&l.append("event",u.name),i&&l.append("command",i.name),c&&l.append("config",c),s.label=1;case 1:return s.trys.push([1,4,,5]),"chat_message"===a&&(0,x.l)({threadID:null!==(d=e.thread_id)&&void 0!==d?d:""}),[4,(0,T.PT)("/api/internal/_ai-guide/streaming-chat?"+l.toString(),{method:"POST",body:JSON.stringify(e),signal:t})];case 2:if(!(g=s.sent()).ok||!g.body)throw new y.jc("askAIGuide request failed",y.D1.KhanService);return[4,P(g.body.getReader(),n,r)];case 3:return s.sent(),[3,5];case 4:if(m=s.sent(),(0,o._)(m,y.jc))throw m;throw new y.jc("an error occurred during a request to askAIGuide",y.D1.Internal,{cause:m});case 5:return[2]}})}),function(e,t,n,r){return a.apply(this,arguments)}),R=n("679202"),O=n("707409"),j=new y.jc("retry was cancelled",y.D1.Internal),B=new y.jc("exceeded retry attempts",y.D1.Internal),M={ExponentialBackoff:"exponential-backoff",Fixed:"fixed"},G={initialDelayMs:1e3,maxDelayMs:3e4,maxRetries:10,policy:M.Fixed},U=function(e,t,n,r){if(0===n)return 0;switch(r){case M.ExponentialBackoff:return Math.min(e*Math.pow(2,n-1),t);case M.Fixed:default:return e}},Z=n("499282"),F=n("340379"),V=function(e){var t=e[e.length-1];return(null==t?void 0:t.type)==="outgoing"?(0,F._)(e.slice(0,-1)).concat([(0,Z._)((0,O._)({},t),{isError:!0})]):(0,E.v)(e,c.ag._({id:"1okPHv",message:"I'm not working right now because I might have technical problems. Please try again later."}))},K=n("609904"),z=n("635720"),H=n("764038"),Y=n("17899"),W=n("341422"),q=n("775954"),$=n("528164"),J=n("527383"),Q=n("605110"),X=n("863364"),ee=n("575618"),et=n("94525"),en=n("281964"),er=n("258865"),ea=n("644119"),ei=n.n(ea),eo=n("891821"),es=n("896527");function eu(){var e=(0,er._)(["\n        query districtId {\n            user {\n                id\n                userDistrictInfos {\n                    id\n                    district {\n                        id\n                    }\n                }\n            }\n        }\n    "]);return eu=function(){return e},e}var ec=(0,eo.Fv)(ei()(eu())),el=function(){var e,t,n,r,a,i,o=(0,en._)((0,es.Z)(ec),1)[0];return"success"===o.status&&null!==(i=null===(a=o.data)||void 0===a?void 0:null===(r=a.user)||void 0===r?void 0:null===(n=r.userDistrictInfos)||void 0===n?void 0:null===(t=n[0])||void 0===t?void 0:null===(e=t.district)||void 0===e?void 0:e.id)&&void 0!==i?i:null},ed=n("73250"),eg=function(e){var t=(0,g.useRef)(!1),n=(0,g.useRef)(performance.now()),r=function(){!document.hidden&&(n.current=performance.now())};(0,z.xM)(function(){return document.addEventListener("visibilitychange",r),function(){return document.removeEventListener("visibilitychange",r)}});var a=(0,m.T)().pathname,i=(0,f.Z)(),o="success"===i.status?i.profile:null,s=el(),u=(0,k.m)(),l=u.selectedVoice,d=u.audioCache,v=u.setAudioCache,_=(0,I.y)().preferences;return(0,g.useCallback)(function(r,i){var u="",g="",m=!1,f=[],C=new Map,k=function(){t.current=!0,S.set("conversation",function(e){return(0,K.Z)(function(){t.current=!1}),(0,et.q)({answer:g,conversation:e,interactionId:u,actionStatusMap:new Map(C)})})},I=function(e,t){S.set("conversation",function(n){var r=(0,W.Z)(n,function(t){return t.interactionId===e&&"incoming"===t.type});return -1===r?n:(0,F._)(n.slice(0,r)).concat([(0,O._)({},n[r],t)],(0,F._)(n.slice(r+1)))})};return{onAnswer:function(a,i){if(!r.aborted){if(g=a,C.set(L.B.TEXT,L.d.LOADING),(!p()||!t.current)&&k(),p()){var o=e/100,u=performance.now();if(Math.random()<10*o){var c=S.latest().conversation;(0,K.Z)(function(e){if(u<n.current){y.ZP.log("tab was idled, discarding AiGuideOnAnswerPerformanceCaptured");return}(0,w.x)({eventType:"AiGuideOnAnswerPerformanceCaptured",eventSchemaVersion:2,numFetchMilliseconds:i,numRenderMilliseconds:Math.min(e-u,6e4),numMessagesInChat:c.length,containsMath:a.includes("\\(")&&a.includes("\\)"),districtId:s})})}Math.random()<o&&(0,K.Z)(function(e){if(u<n.current){y.ZP.log("tab was idled, discarding ClientReactRenderPerformanceCaptured");return}(0,w.x)({eventType:"ClientReactRenderPerformanceCaptured",component:"useMakeStreamingHandlers",eventSchemaVersion:1,device:"chromebook",duration:Math.min(e-u,6e4),interaction:"onAnswer",owner:"Khanmigo Core Platform"})})}}},onAudio:function(e){if(!r.aborted&&!m){if("error"in e){m=!0;var t=l?"".concat(l,":").concat(_.guideLanguageCode):"lmnt:khanmigo-m-1:en";C.set(L.B.AUDIO,L.d.ERROR);var n=d.get("".concat(t,":error"));n?(f=[n[0]],(0,H.v)((0,Z._)((0,O._)({},n[0]),{isInitialChunk:!0}))):(0,ed.d)(t,"error").then(function(e){f=[e],(0,H.v)((0,Z._)((0,O._)({},e),{isInitialChunk:!0}))});return}C.set(L.B.AUDIO,L.d.LOADING);var a=0===f.length;f.push(e),(0,H.v)((0,Z._)((0,O._)({},e),{isInitialChunk:a}))}},onCommand:function(e,t){if(!r.aborted)(0,Y.K)({name:e,content:t})},onMetadata:function(e){if(r.aborted)return;var t,n=e.interactionId,s=e.threadId,u=e.conversation,l=e.conversationEntries,d=e.remainingQuota,m=e.restoredPromptVariables;if(!S.latest().threadId||s===S.latest().threadId){!S.latest().threadId&&s&&(S.set("threadId",s),(0,w.x)({eventType:"AiGuideNewThreadStarted",eventSchemaVersion:4,aiGuideThreadId:s,aiGuideNotificationId:null!==(t=(0,q.O7)("notificationID"))&&void 0!==t?t:"",aiGuideNavigationId:S.latest().navigation.id})),m&&(0,A.cU)(m);var p=(0,J.M)(S.latest().conversation,n);if(p&&!p.isGeneratingResponse){var y=(0,J.M)(u,n);y&&I(n,y)}else S.set("conversation",u);if(S.set("conversationEntries",l),d){var _=parseFloat(d);S.set("remainingQuota",_),_<=.1&&(S.set("conversation",function(e){return(0,E.v)(e,(0,$.n2)(_))}),(0,w.x)({eventType:"AiGuideBotErrorMessageReceived",eventSchemaVersion:2,aiGuideThreadId:s,aiGuideNavigationId:S.latest().navigation.id,aiGuideInteractionId:n,errorKind:"NEAR_USAGE_QUOTA"}))}S.set("conversation",function(e){var t,n,r,i;return t=e,n=a,r=S.latest().userHasToggledPersona,i=(0,h.U)(o,a,S.latest().userAsStudent),!(0,ee.qB)(n)&&i&&r?[{interactionId:"",type:"incoming",uiOnly:!0,serverOnly:!1,user:"Student",text:i===X.Yc.Teacher?c.ag._({id:"o2CMkd",message:"Back to your teacher chat!\n\nYou have your full capabilities again, and I’ll be the best Teacher’s Guide I can!"}):c.ag._({id:"d046ny",message:"This is your Student view!\n\n**I will respond as I would to any of your students.** Give me a spin!"})}].concat((0,F._)(t)):t}),f.length>0&&((0,H.v)({isComplete:!0}),v(function(e){return new Q.k(e).set(n,f)}),C.set(L.B.AUDIO,L.d.SUCCESS)),null==i||i(e,g,f.length>0)}},onStopId:function(e){if(!r.aborted)u=e,S.set("stopId",e)},onActionStatus:function(e,t){if(!r.aborted)t===L.d.SUCCESS?C.delete(e):C.set(e,t),I(u,{actionStatusMap:new Map(C)})}}},[a,o,_,l,d,v,e,s])},em=n("796827"),ef=n("349801"),eh=function(){var e,t,n=(0,m.T)(),r=n.pathname,a=n.href,l=n.queryParams,T=(0,f.Z)(),x="success"===T.status?T.profile:null,D=(0,_.V)(),L=(0,k.m)(),P=L.selectedVoice,Z=L.isVoiceOn,F=(0,I.y)().preferences.guideLanguageCode,K=(0,u.aS)("react-render-sample-rate",0),z=(0,g.useMemo)(function(){return l.assignment},[l]),H=eg(K),Y=(0,g.useRef)(function(){});(0,g.useEffect)(function(){Y.current(),S.set("retryTimeoutSeconds",0)},[r]);var W=(0,g.useCallback)((e=(0,i._)(function(e,t){var n,u,l,g,m,f,v,_,k,I,T=arguments;return(0,s.Jh)(this,function(L){switch(L.label){case 0:u=(n=T.length>2&&void 0!==T[2]?T[2]:{}).customPrompt,l=n.promptVersionOverride,g=n.demoStartDate,m=n.demoEndDate,f=n.onResponseStart,v=n.onResponseComplete,_=n.onResponseFailed,L.label=1;case 1:var K,W,q;return L.trys.push([1,3,,4]),[4,(W=(K=(0,i._)(function(n,i,k){var I,T,L,O,j,B,M,G,U,K,W,q,$,J,Q,X,ee,et,en,er,ea,ei,eo,es,eu,ec,el;return(0,s.Jh)(this,function(i){switch(i.label){case 0:L=(T=H((I=R.j()).signal,v)).onAnswer,O=T.onAudio,j=T.onMetadata,B=T.onStopId,M=T.onCommand,G=T.onActionStatus,U=d()(L,S.latest().bufferResponse?0:p()?1e3:200),K="chat_message"===e&&Z,W="command"===e&&"commandObject"in t&&t.commandObject.name.startsWith("coediting/"),q="command"===e&&"commandObject"in t&&("associate_conversation_test_case"===t.commandObject.name||"set_conversation_test_case_name"===t.commandObject.name||"set_conversation_test_case_success"===t.commandObject.name),$="command"===e&&!W&&!q,S.set("menusDisabled",!0),S.set("retryTimeoutSeconds",0),i.label=1;case 1:return i.trys.push([1,3,10,11]),[4,N({persona:null!==(J=(0,h.U)(x,r,S.latest().userAsStudent))&&void 0!==J?J:"",botName:null!==(Q=S.latest().selectedBotName)&&void 0!==Q?Q:"",command:e,event:"event"in t?t.event:void 0,essaySessionId:null!==(X=S.latest().essaySessionId)&&void 0!==X?X:void 0,commandObject:"commandObject"in t?t.commandObject:void 0,message:"message"in t?t.message:void 0,imageURLs:"imageURLs"in t?t.imageURLs:void 0,actionBubble:"actionBubble"in t?t.actionBubble:void 0,promptStore:(0,A.Hu)(),contextualLinks:S.latest().contextualLinks,conversation:S.latest().conversation.filter(function(e){return!e.uiOnly}),customPrompt:null!=u?u:"",url:a,region:"success"===D.status?D.regionCode:"",thread_id:S.latest().threadId,contentUrlPath:null!==(ee=S.latest().contentURLPath)&&void 0!==ee?ee:void 0,dynamicBot:S.latest().dynamicBot,modelOverride:S.latest().modelOverride,temperatureOverride:S.latest().temperatureOverride,stream:!S.latest().bufferResponse,flags:{inlineLinksAsMarkdown:"true",promptVersionOverride:null!=l?l:"",demoStartDate:null!=g?g:"",demoEndDate:null!=m?m:""},sendToPython:$,annotations:S.latest().annotations,generateVoice:K,assignmentId:z,selectedVoice:null!=P?P:void 0,selectedGuideLanguageCode:F},I.signal,{onAnswer:U,onAudio:O,onMetadata:j,onStopId:B,onCommand:M,onActionStatus:G},f)];case 2:return i.sent(),[3,11];case 3:if(et=i.sent(),I.signal.aborted)return[2];if(!(0,o._)(et,y.jc))return[3,6];if(!(0,C.FG)(et))return[3,5];return[4,et.response.json()];case 4:er=function(e){var t,n;if("invalid_input"===e.error)t=ef.D.InvalidInput;else return;return new em.Z(null!==(n=e.reason)&&void 0!==n?n:"",t)}(i.sent()),i.label=5;case 5:null==_||_(null!=er?er:et),i.label=6;case 6:if((null==et?void 0:null===(en=et.response)||void 0===en?void 0:en.status)!==429)return[3,9];return[4,et.response.json()];case 7:if("quota_exceeded"===(ea=i.sent()).error)return S.set("remainingQuota",0),S.set("conversation",function(e){return(0,E.v)(e,c.ag._({id:"+ngee4",message:"I'm sorry, I am out of AI power for today. Please come back to me tomorrow."}))}),(0,w.x)({eventType:"AiGuideBotErrorMessageReceived",eventSchemaVersion:2,aiGuideThreadId:null!==(ei=S.latest().threadId)&&void 0!==ei?ei:"",aiGuideNavigationId:S.latest().navigation.id,aiGuideInteractionId:"",errorKind:"REACHED_USAGE_QUOTA"}),[2];if("rate_limited"!==ea.error)return[3,9];return S.set("retryTimeoutSeconds",k/1e3),es=(eo=n()).result,eu=eo.cancel,Y.current=eu,[4,es];case 8:return i.sent(),[2];case 9:if("event"in t&&"resume_conversation"===t.event.name){if((null==et?void 0:null===(ec=et.response)||void 0===ec?void 0:ec.status)===403)throw b.SE;throw b.cb}return S.set("conversation",function(e){return V(e)}),(0,w.x)({eventType:"AiGuideBotErrorMessageReceived",eventSchemaVersion:2,aiGuideThreadId:null!==(el=S.latest().threadId)&&void 0!==el?el:"",aiGuideNavigationId:S.latest().navigation.id,aiGuideInteractionId:"",errorKind:"GENERAL"}),[3,11];case 10:return U.cancel(),R.Zw(I),S.set("stopId",null),S.set("menusDisabled",!1),S.set("annotations",[]),[7];case 11:return[2]}})}),function(e,t,n){return K.apply(this,arguments)}),q={policy:M.Fixed,initialDelayMs:5e3,maxRetries:3},new Promise(function(e,t){var n=(0,O._)({},G,q),r=n.initialDelayMs,a=n.maxDelayMs,i=n.maxRetries,o=n.policy,s=0,u=function(){var n,c=new Promise(function(e,t){var c=U(r,a,++s,o);if(s>i)return t(B);var l=U(r,a,s+1,o);n=window.setTimeout(function(){return W(u,s,l).then(e).catch(t)},c)}),l=function(){};return{result:Promise.race([c,new Promise(function(e,t){l=function(){window.clearTimeout(n),t(j)}})]).then(e).catch(t),cancel:l}};W(u,s,U(r,a,s+1,o)).then(e).catch(t)}))];case 2:return L.sent(),[3,4];case 3:if((k=L.sent())===j)return[2];if(k===b.SE||k===b.cb)throw k;return S.set("conversation",function(e){return V(e)}),(0,w.x)({eventType:"AiGuideBotErrorMessageReceived",eventSchemaVersion:2,aiGuideThreadId:null!==(I=S.latest().threadId)&&void 0!==I?I:"",aiGuideNavigationId:S.latest().navigation.id,aiGuideInteractionId:"",errorKind:"GENERAL"}),[3,4];case 4:return[2]}})}),function(t,n){return e.apply(this,arguments)}),[a,Z,H,r,x,D,P,z,F]);return(0,g.useCallback)((t=(0,i._)(function(e,t){var n,a,i,o,u,c,l,d,g=arguments;return(0,s.Jh)(this,function(s){switch(s.label){case 0:if(a=(n=g.length>2&&void 0!==g[2]?g[2]:{}).customPrompt,i=n.promptVersionOverride,o=n.demoStartDate,u=n.demoEndDate,c=n.onResponseStart,l=n.onResponseComplete,d=n.onResponseFailed,r.includes("/guide-extension"))return[3,2];return[4,W(e,t,{customPrompt:a,promptVersionOverride:i,demoStartDate:o,demoEndDate:u,onResponseStart:c,onResponseComplete:l,onResponseFailed:d})];case 1:return s.sent(),[2];case 2:return[2,new Promise(function(n,r){var s=v.l4(function(){s(),W(e,t,{customPrompt:a,promptVersionOverride:i,demoStartDate:o,demoEndDate:u,onResponseStart:c,onResponseComplete:l,onResponseFailed:d}).then(function(){return n()}).catch(function(e){return r(e)})});v.VI()})]}})}),function(e,n){return t.apply(this,arguments)}),[r,W])}},232618:function(e,t,n){n.d(t,{Dl:function(){return u},Hu:function(){return s},OS:function(){return c},cU:function(){return o},oj:function(){return i},vc:function(){return l}});var r=n(707409),a={},i=function(e,t){null==t?delete a[e]:a[e]=t},o=function(e){a=(0,r._)({},a,e)},s=function(){return(0,r._)({},a)},u=function(e){return a[e]},c=function(e){Object.keys(a).forEach(function(t){var n;!(null==e?void 0:null===(n=e.exclude)||void 0===n?void 0:n.includes(t))&&delete a[t]})};function l(e){var t=function(e){try{return JSON.parse(e)}catch(e){return null}}(e);if(!t)return null;var n=null==t?void 0:t.name;return n?{name:n,value:null==t?void 0:t.value}:null}},694415:function(e,t,n){n.d(t,{M:function(){return h}});var r=n(676150),a=n(281964),i=n(258865),o=n(816364),s=n(644119),u=n.n(s),c=n(667294),l=n(891821),d=n(2880),g=n(323658);function m(){var e=(0,i._)(["\n    mutation CloseThread($input: String!) {\n        closeThread(threadId: $input) {\n            error {\n                code\n            }\n        }\n    }\n"]);return m=function(){return e},e}var f=(0,l.Fv)(u()(m())),h=function(){var e,t=(0,a._)((0,d.Z)(f),1)[0];return(0,c.useCallback)((e=(0,r._)(function(e){var n,r;return(0,o.Jh)(this,function(a){switch(a.label){case 0:return[4,t({input:e})];case 1:if(r="error"===(n=a.sent()).status?n.error:"success"===n.status&&n.data.closeThread.error?n.data.closeThread.error.code:null)throw new g.jc("Failed to record AI Guide close thread mutation",g.D1.Internal,{cause:r});return[2]}})}),function(t){return e.apply(this,arguments)}),[t])}},85663:function(e,t,n){n.d(t,{Z:function(){return g}});var r=n(281964),a=n(258865),i=n(644119),o=n.n(i),s=n(658852),u=n(840670),c=n(896527);function l(){var e=(0,a._)(["\n    query getCooldownStatus {\n        user {\n            id\n            hasCooldown\n            cooldownStatus {\n                hasAntiCheatCooldown\n                lastAntiCheatCooldownExpiresAt\n                hasTeacherDirectedCooldown\n                teacherDirectedCooldownExpiresAt\n                teacherDirectedCooldownStartedBy {\n                    id\n                    kaid\n                    nickname\n                }\n            }\n        }\n    }\n"]);return l=function(){return e},e}var d=(0,u.Fv)(o()(l()));let g=function(e){var t=e.skip,n=(0,r._)((0,c.Z)(d,{fetchPolicy:s.GE.NetworkOnly,skip:void 0!==t&&t}),2),a=n[0],i=n[1];switch(a.status){case"loading":case"error":case"aborted":case"no-data":return{status:a.status,hasCooldown:!1,refetch:i};case"success":var o,u,l,g,m=null!==(l=null===(o=a.data.user)||void 0===o?void 0:o.hasCooldown)&&void 0!==l&&l,f=null!==(g=null===(u=a.data.user)||void 0===u?void 0:u.cooldownStatus)&&void 0!==g?g:void 0;return{status:a.status,hasCooldown:m,cooldownStatus:function(e){if(!!e){if(e.hasTeacherDirectedCooldown){var t,n,r,a;return{hasCooldown:!0,cooldownType:"TeacherDirected",expiresAt:e.teacherDirectedCooldownExpiresAt?new Date(e.teacherDirectedCooldownExpiresAt):null,teacherKaid:null!==(r=null===(t=e.teacherDirectedCooldownStartedBy)||void 0===t?void 0:t.kaid)&&void 0!==r?r:null,teacherName:null!==(a=null===(n=e.teacherDirectedCooldownStartedBy)||void 0===n?void 0:n.nickname)&&void 0!==a?a:null}}return e.hasAntiCheatCooldown?{hasCooldown:!0,cooldownType:"AntiCheat",expiresAt:e.lastAntiCheatCooldownExpiresAt?new Date(e.lastAntiCheatCooldownExpiresAt):null,teacherKaid:null,teacherName:null}:{hasCooldown:!1,cooldownType:"None",expiresAt:null,teacherKaid:null,teacherName:null}}}(f),refetch:i}}}},360871:function(e,t,n){n.d(t,{T:function(){return f}});var r=n(281964),a=n(258865),i=n(287840),o=n(644119),s=n.n(o),u=n(667294),c=n(847530),l=n(840670),d=n(896527);function g(){var e=(0,a._)(["\n    query guideLanguages {\n        khanmigoSupportedKALocales {\n            id\n            khanmigoSupport\n            displayName\n            localName\n        }\n    }\n"]);return g=function(){return e},e}var m=(0,l.Fv)(s()(g())),f=function(){var e=(0,r._)((0,d.Z)(m,{skip:!c.C0.isLoggedIn}),1)[0],t=(0,i.NQ)();return(0,u.useMemo)(function(){if("success"!==e.status)return e;var n=null==t?void 0:t.isOn("streaming_translation"),r=e.data.khanmigoSupportedKALocales.filter(function(e){return!!n||"FULL"===e.khanmigoSupport}),a=r.find(function(e){return e.id===c.O0.kaLocale})?c.O0.kaLocale:"en";return{status:"success",data:{guideLanguages:r,defaultLanguageCode:a}}},[e,t])}},101459:function(e,t,n){n.d(t,{Y:function(){return l},u:function(){return d}});var r=n(281964),a=n(258865),i=n(644119),o=n.n(i),s=n(891821),u=n(896527);function c(){var e=(0,a._)(["\n    query checkPromotion($promoName: String!) {\n        user {\n            id\n            promotion(promoName: $promoName)\n        }\n    }\n"]);return c=function(){return e},e}var l=(0,s.Fv)(o()(c())),d=function(e,t){var n,a,i=(0,r._)((0,u.Z)(l,{variables:{promoName:e},skip:t}),1)[0];return"success"===i.status&&null!==(a=null===(n=i.data.user)||void 0===n?void 0:n.promotion)&&void 0!==a&&a}},863364:function(e,t,n){n.d(t,{K2:function(){return l},MF:function(){return c},Us:function(){return u},Yc:function(){return d},nw:function(){return s}});var r,a,i,o,s=((r={}).General="General",r.Positive="Positive",r.Negative="Negative",r.Quick="Quick",r);var u=((a={}).navigation="navigation",a.setPromptVariable="setPromptVariable",a.openModal="openModal",a.coeditorInsertText="coeditorInsertText",a.newChat="newChat",a.copyToClipboard="copyToClipboard",a.replaceHighlightedText="replaceHighlightedText",a),c=Object.freeze(Object.values(u));var l=((i={}).AssignmentContext="ASSIGNMENT CONTEXT",i);var d=((o={}).Teacher="teacher",o.Parent="parent",o.Student="student",o.DistrictAdmin="district_admin",o)},528164:function(e,t,n){n.d(t,{SN:function(){return o},Xq:function(){return c},ZP:function(){return m},h4:function(){return g},jI:function(){return d},n2:function(){return u},yC:function(){return s},yZ:function(){return l}});var r=n(285665),a=n(736324),i={chatDisabledFocusMode:function(e,t){return r.ag._({id:"sTpCUV",message:"Your teacher, {teacherName}, has turned on Focus Mode until **{time}** so I'm not available to chat right now. Any of your teachers can end Focus Mode at any time.",values:{teacherName:e,time:t}})},chatDisabledInterestsOff:function(e){return r.ag._({id:"4tqRSO",message:"Looks like you have turned off Interests. To enable this activity, please turn on Interests in the [Khanmigo Settings]({url}).",values:{url:e}})},headphoneIconTooltip:function(e,t,n){return n?r.ag._({id:"gjn6gJ",message:"Khanmigo Voice is currently unavailable"}):t?r.ag._({id:"LYocXy",message:"Khanmigo Voice is disabled"}):e?r.ag._({id:"JKxauc",message:"Turn OFF Khanmigo Voice"}):r.ag._({id:"vBf+wr",message:"Turn ON Khanmigo Voice"})},microphoneIconTooltip:function(e,t){return t?r.ag._({id:"TVEatU",message:"Speech Recognition is disabled"}):e?r.ag._({id:"dWNML2",message:"Turn OFF Speech Recognition"}):r.ag._({id:"pKFHf1",message:"Turn ON Speech Recognition"})},respondingInNSeconds:function(e){return r.ag._({id:"+lD/SN",message:"{seconds, plural, one {Not delivered. Next attempt in #s} other {Not delivered. Next attempt in #s}}",values:{seconds:e}})},guideLanguageName:function(e){var t;if("pt"===e)return r.ag._({id:"rp/zaT",message:"Brazilian Portuguese"});return null===(t=(0,a.Z)().get(e))||void 0===t?void 0:t.languageName}},o=function(e,t){var n=Math.round(100*e);return t?r.ag._({id:"/ygwas",message:"AI Power - {percentage}%\nTraffic - High\nMessage Limit - {messageLimit}/hr",values:{percentage:n,messageLimit:30}}):r.ag._({id:"u5au4M",message:"AI Power - {percentage}%",values:{percentage:n}})},s=function(e,t){var n=Math.round(100*e);return t?r.ag._({id:"0ZbqHz",message:"AI Power - {percentage}%, Traffic - High, Message Limit - {messageLimit} messages per hour",values:{percentage:n,messageLimit:30}}):r.ag._({id:"u5au4M",message:"AI Power - {percentage}%",values:{percentage:n}})},u=function(e){var t=Math.round(100*e);return r.ag._({id:"fdS4Tp",message:"I'm almost out of AI power. Only {remainingPercent}% left for today. Be mindful using me.",values:{remainingPercent:t}})};function c(e){var t={LOW:r.ag._({id:"3FwMNf",message:"Simple "}),MEDIUM:r.ag._({id:"TJBHlP",message:"Standard"}),HIGH:r.ag._({id:"Fnc/tx",message:"Professorial"})};return r.ag._({id:"quL8HI",message:"{0}. {1}",values:{0:Object.keys(t).indexOf(e)+1,1:t[e]}})}function l(e){var t={LOW:r.ag._({id:"3FwMNf",message:"Simple "}),MEDIUM:r.ag._({id:"TJBHlP",message:"Standard"}),HIGH:r.ag._({id:"Fnc/tx",message:"Professorial"})};return r.ag._({id:"SvVF1v",message:"Your reading style is now set to {0}. You can change this anytime in the Khanmigo Preferences.",values:{0:t[e]}})}function d(e){return r.ag._({id:"ntZb6F",message:"Your preferred language is now set to {0}. You can change this anytime in the Khanmigo Preferences.",values:{0:i.guideLanguageName(e)}})}function g(e,t,n){return n?r.ag._({id:"EzCCR1",message:"{languageLocalName} (default)",values:{languageLocalName:t}}):"".concat(t," (").concat(i.guideLanguageName(e),")")}let m=i},782144:function(e,t,n){n.d(t,{VD:function(){return o},Wd:function(){return i},oQ:function(){return a},vW:function(){return r}});var r="ai-terms_accepted",a=24,i=81,o={type:"Default",message:null}},86507:function(e,t,n){n.d(t,{J:function(){return s},l:function(){return o}});var r=n(404103),a=["/:domain/:course/test/mastery-challenge","/:domain/:course/test/subject-challenge","/:domain/:course/test/:slug([a-z0-9]+:course-challenge)","/:domain/:course/test/:slug([a-z0-9]+:mastery-challenge)","/:domain/:course/:unit/:kind(quiz|test)/:slug","/:domain/:course/:unit/:lesson/:kind(quiz|test)/:slug"],i=["/profile/me/khanmigo/activities/activity-default-teacher","/profile/me/khanmigo/activities/activity-default-parent","/profile/me/khanmigo/activities/activity-default-learner"].concat(a),o=function(e){return!!(0,r.LX)(e,i)},s=function(e){return!!(0,r.LX)(e,a)}},885498:function(e,t,n){n.d(t,{ZP:function(){return s}});var r=[{type:"math",start:"\\(",end:"\\)",inline:!0},{type:"math",start:"\\[",end:"\\]",inline:!1}],a=function(e,t){var n=[];return e.forEach(function(e){if("text"!==e.type){n.push(e);return}for(var r=e.data,a=0,i=e.hasStartDelimiter;a<r.length;){var o=r.indexOf(t.start,a);if(-1===o)break;var s=r.slice(a,o);a=o,i=!0,s.length>0&&n.push({type:"text",data:s,hasStartDelimiter:!1});var u=r.indexOf(t.end,o+t.start.length);if(-1===u)break;n.push({type:t.type,data:r.slice(o+t.start.length,u),rawData:r.slice(o,u+t.end.length),display:!t.inline}),a=u+t.end.length,i=!1}var c=r.slice(a);c.length>0&&n.push({type:"text",data:c,hasStartDelimiter:i})}),n},i=new RegExp(/((?:(?:https?|ftp|file):\/\/|www\.|ftp\.)(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[-A-Z0-9+&@#/%=~_|$?!:,.])*(?:\([-A-Z0-9+&@#/%=~_|$?!:,.]*\)|[A-Z0-9+&@#/%=~_|$]))/gim),o=function(e){var t=[];return e.forEach(function(e){if("text"!==e.type){t.push(e);return}e.data.split(i).forEach(function(e){if(i.test(e)){var n=e.replace(/(https?|ftp|file):\/\//,"");n=n.substring(n.indexOf("/")),t.push({type:"link",data:n});return}t.push({type:"text",data:e,hasStartDelimiter:!1})})}),t};let s=function(e){if(-1!==e.indexOf("<AIThoughts>")){var t=e.indexOf("</AIThoughts>");e=-1!==t?(e=e.slice(t+13)).replace(/^\s+/,""):""}else -1!=="<AIThoughts>".indexOf(e)&&(e="");var n=[{type:"text",data:e,hasStartDelimiter:!1}];return n=o(n),r.forEach(function(e){n=a(n,e)}),n}},527383:function(e,t,n){n.d(t,{M:function(){return r}});var r=function(e,t){var n;return null!==(n=e.findLast(function(e){return"incoming"===e.type&&e.interactionId===t}))&&void 0!==n?n:null}},9713:function(e,t,n){n.d(t,{l4:()=>i,u3:()=>s,VI:()=>o});var r=n("671896"),a=n("892062");function i(e){return(0,r.i)("guide:updatePageContext",e)}function o(){(0,a.d)({type:"guide:requestContext"})}function s(e){var t=e.threadID,n=e.botName;(0,a.d)({type:"guide:sendThreadInfo",data:{botName:n,threadID:t}})}n("64046")},731620:function(e,t,n){n.d(t,{MR:function(){return a},Ti:function(){return r},XZ:function(){return d},bx:function(){return g},kI:function(){return o},n6:function(){return c},oJ:function(){return i},ou:function(){return s}});var r=function(){var e=document.documentElement,t=document.body;return e&&t?Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight):0},a=function(e){return e?e.getBoundingClientRect().bottom+window.pageYOffset-document.documentElement.clientTop:0},i=function(e){return e?e.getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop:0},o=function(e,t,n){if(!!e)s(i(e),t||0,n)},s=function(e,t,n){c(window,e,t,n)};"undefined"!=typeof HTMLElement&&!HTMLElement.prototype.scrollTo&&(HTMLElement.prototype.scrollTo=function(e,t){this.scrollLeft=e,this.scrollTop=t});var u=function(e,t){"function"==typeof e.scrollTo?e.scrollTo(0,t):"scrollTop"in e&&(e.scrollTop=t)},c=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,a=e===window?window.pageYOffset:e.scrollTop,i=t-a,o=n/17,s=0,c=setInterval(function(){if(s<o){var n=(-Math.cos(s/o*Math.PI)+1)/2;u(e,a+i*n),s+=1}else u(e,t),clearInterval(c),r&&r()},17)},l=function(e){return e===document.body||null==e?window:e.scrollHeight>e.clientHeight?e:l(e.parentElement)},d=750,g=function(e,t,n){setTimeout(function(){var r,a=l(e),i=e.getBoundingClientRect(),o=a===window?{top:0,bottom:window.innerHeight}:a.getBoundingClientRect(),s=0,u=a===window?window.scrollY:a.scrollTop;if(i.bottom>o.bottom){var g=i.bottom-o.bottom;i.top+g<o.top&&(g=i.top-o.top),s=u+g}else if(i.top<o.top)s=u+(i.top-o.top);else{null==t||t();return}c(a,s,null!==(r=null==n?void 0:n.duration)&&void 0!==r?r:d,t)},0)}},264087:function(e,t,n){n.d(t,{Z:function(){return i}});var r=n(285665),a=n(935025);let i={getNewWindowText:function(){return r.ag._({id:"VltXfr",message:"(Opens in a new window)"})},init:function(e){e.search,this.externalLink(),this.srOnlyInputFocus(),this.blurOnESC()},externalLink:function(){a.Z.delegate("focus","a[target=_blank]:not(.external-link)",function(e,t){var n=t.lastChild;if(!n||n.innerHTML!==r.ag._({id:"VltXfr",message:"(Opens in a new window)"}))t.classList.add("external-link"),t.title&&(t.title+=" ".concat(r.ag._({id:"VltXfr",message:"(Opens in a new window)"}))),t.insertAdjacentHTML("beforeend","<span class='sr-only'>".concat(r.ag._({id:"VltXfr",message:"(Opens in a new window)"}),"</span>"))})},srOnlyInputFocus:function(){a.Z.delegate("focus",".sr-only input, .sr-only a",function(e,t){var n=a.Z.closest(t,".sr-only");n&&(n.classList.toggle("sr-only"),n.classList.toggle("sr-only-visible"))}),a.Z.delegate("blur",".sr-only-visible input, .sr-only-visible a",function(e,t){var n=a.Z.closest(t,".sr-only-visible");n&&(n.classList.toggle("sr-only"),n.classList.toggle("sr-only-visible"))})},blurOnESC:function(){a.Z.delegate("keyup","input.blur-on-esc",function(e){27===e.which&&e.target.blur()})}}},935025:function(e,t,n){n.d(t,{Z:function(){return i}});var r,a=function(e){window.eval.call(window,e)};"undefined"!=typeof execScript&&(a=function(e){return execScript(e)});let i={ready:function(){return!r&&(r=new Promise(function(e,t){if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)return e(void 0);document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e)})),r},globalEval:a,matches:function(e,t){var n=e.matches||e.matchesSelector;if(n)return n.call(e,t);var r=document.querySelectorAll(t);return Array.prototype.indexOf.call(r,e)>=0},closest:function(e,t){if(e.closest)return e.closest(t);for(var n=e;n;){if(this.matches(n,t))return n;n=n.parentNode}return null},delegate:function(e,t,n){var r=this;document.addEventListener(e,function(e){var a=r.closest(e.target,t);a&&n(e,a)},!0)}}},503848:function(e,t,n){n.d(t,{Z:()=>L});var r=n("343830"),a=n("652062"),i=n("727412"),o=n("847530"),s=n("889622"),u=n("808114"),c=n("775567"),l=n("323658"),d=n("264087"),g=n("896526"),m=n("197506"),f=function(){if(!window.ScratchpadUI||!window.ScratchpadUI.trusted||window===top)m.Z.register("notifications_added",function(e){var t=e.toast;t&&t.length>0&&Promise.all([n.e("526604"),n.e("270272"),n.e("476454")]).then(n.bind(n,207525)).then(function(e){e.renderToastFromAPI(t[0])})}),m.Z.register("user_profile",function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[m.Z.toCamelCase(n)]=e[n]);(0,g.bF)(t)})},h=n("513259"),p=n("935025"),v=n("691296"),y=n.n(v),_=n("950807"),w=y()(function(e){_.h.dispatch(_.Nw.markTerminationConversion(Date.now()))},1e3),C=y()(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_.h.dispatch(_.Nw.markContinuationConversion(Date.now(),t))},1e3),S=y()(function(e){var t=document.visibilityState;"hidden"===t||"prerender"===t?w(e):"visible"===t&&C(e,!0)},1e3),k=[{target:document,type:"mousemove",handler:C},{target:document,type:"scroll",handler:C,useCapture:!0},{target:document,type:"visibilitychange",handler:S}],I=!1,b=function(){if(!I){var e=!0,t=!1,n=void 0;try{for(var r,a=k[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var i=r.value,o=i.target,s=i.type,u=i.handler,c=i.useCapture;o.addEventListener(s,u,c)}}catch(e){t=!0,n=e}finally{try{!e&&null!=a.return&&a.return()}finally{if(t)throw n}}I=!0}},A=n("393270"),E=n("143698"),T=n("40126"),x=n("466459"),D=function(e){var t=(0,x.N)("noSentrySample");(0,g.s0)().then(function(n){var r=(0,E.Tp)().analytics;(0,T.V)(e,{enabled:r,profile:n,forceNoSample:t})})};let L=function(){function e(t){(0,r._)(this,e),(0,i._)(this,"_initDone",void 0),(0,i._)(this,"_entrypoint",void 0),this._initDone=!1,this._entrypoint=t}return(0,a._)(e,[{key:"init",value:function(){var e=this;if(!this._initDone)this._initDone=!0,this._beforeDomReady(),p.Z.ready().then(function(){return e._afterDomReady()})}},{key:"shouldInitialAnalytics",value:function(){return!o.O0.embedded&&!o.O0.IS_DEV_SERVER&&!o.O0.isE2E&&"/pwreset"!==window.location.pathname}},{key:"_beforeDomReady",value:function(){this.shouldInitialAnalytics()?(0,l.qt)(this._entrypoint):(window.kaErrors=window.kaErrors||[],window.onerror=function(e,t,n,r,a){window.kaErrors.push(a)}),(0,c.tR)(),!o.O0.IS_DEV_SERVER&&"undefined"!=typeof window&&window.console&&console.log("\nInterested in working with us?\nSee https://www.khanacademy.org/careers.\n\n");var e=window.location.search;d.Z.init({search:e}),(0,A._)()}},{key:"_afterDomReady",value:function(){var e=window.location,t=e.pathname,r=e.search;this.shouldInitialAnalytics()&&(u.S1(t,r),s.Z.init()),D(this._entrypoint),f(),b(),h.S1(),"en-pt"===o.O0.kaLocale&&Promise.all([n.e("350935"),n.e("107494"),n.e("350670"),n.e("154459"),n.e("576827"),n.e("540339")]).then(n.bind(n,247267)).then(function(e){return e.default}).then(function(e){e.init()})}}]),e}()},632073:function(e,t,n){n.d(t,{H8:function(){return r},Hb:function(){return o},ZP:function(){return s}});var r={about:"about",assignments:"assignments",drafting:"drafting",gettingStarted:"understanding-the-prompt",outlining:"outlining",revising:"revising",sampleEssay:"sample-essay",login:"login"},a="/writing-coach/",i="/writing-coach/essay",o={about:a+r.about,assignments:a+r.assignments,createAssignment:a+"assignment/create",createEssay:a+"essay/create",myEssays:a+"essays",shareAssignmentLink:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new URLSearchParams;return t.forEach(function(e){return r.append("id",e)}),a+"share/assignment?".concat(r.toString())},shareClassroomCode:function(e){return a+"share/class?id="+e},shareNewAssignment:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new URLSearchParams;return t.forEach(function(e){return r.append("id",e)}),a+"share/success?".concat(r.toString())},gettingStarted:function(e){return"".concat(i,"/").concat(e,"/").concat(r.gettingStarted)},outlining:function(e){return"".concat(i,"/").concat(e,"/").concat(r.outlining)},drafting:function(e){return"".concat(i,"/").concat(e,"/").concat(r.drafting)},revising:function(e){return"".concat(i,"/").concat(e,"/").concat(r.revising)},assignmentRedirect:function(e){return a+"go/".concat(e)},join:function(e){return a+"join"+(e?"/".concat(e):"")},buildSampleEssayRedirectBySampleEssayName:function(e){return a+r.sampleEssay+"?sampleEssayName=".concat(e)},classReport:function(e){return"".concat(a,"assignment/").concat(e)},essayProgress:function(e,t){return"".concat(a,"assignment/").concat(e,"/").concat(t)},login:a+r.login};function s(){return[o,r]}},490655:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(707409),a=n(499282),i=n(785893),o=n(667294),s=n(404103),u=n(305505),c=n(731620),l=n(281819);let d=function(e){var t=e.component,n=e.template,d=(0,u.T)(),g=d.pathname,m=d.search,f=(0,s.$B)();return o.useEffect(function(){(0,c.ou)(0,0)},[g]),(0,i.jsx)(o.Suspense,{fallback:(0,i.jsx)(l.Z,{template:n}),children:(0,i.jsx)(t,(0,a._)((0,r._)({},f.params),{search:m,"aria-live":"polite"}))})}},427827:function(e,t,n){n.d(t,{Z:function(){return o}});var r=n(785893);n(667294);var a=n(586552),i=n(656467);let o=function(e){var t=e.resetSettings;return(0,r.jsx)(a.Z,{children:(0,r.jsx)(i.Z,{resetSettings:t})})}},656467:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(785893),a=n(285665);n(667294);var i=n(161930),o=n(680720),s=n(442834),u=n(534924),c=n(582795);let l=function(e){return(0,r.jsx)(u.Z,{resetSettings:e.resetSettings,settings:{title:a.ag._({id:"mALQCE",message:"Oops. Something went wrong. Please try again."}),statusCode:500},children:(0,r.jsxs)(s.Z,{fillScreen:!0,children:[(0,r.jsx)(o.Ih,{style:{textAlign:"center"},children:a.ag._({id:"mALQCE",message:"Oops. Something went wrong. Please try again."})}),(0,r.jsx)(o.uT,{style:{textAlign:"center",marginTop:i.W0.xLarge_32},children:(0,r.jsx)(c.Z,{})})]})})}},477273:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(208014),a=n(343830),i=n(652062),o=n(467696),s=n(785893),u=n(793488),c=n(667294),l=n(444307),d=n(293223),g=n(867411),m=function(e){function t(){return(0,a._)(this,t),(0,r._)(this,t,arguments)}return(0,o._)(t,e),(0,i._)(t,[{key:"render",value:function(){var e=this.props.location,t=e.pathname,n=e.search,r=e.hash,a=(0,d.eg)(t+n+r);return(0,s.jsx)(g.Z,{to:a})}}]),t}(c.Component);let f=(0,u.compose)(l.Z)(m)},872387:function(e,t,n){n.d(t,{Z:function(){return f}});var r=n(208014),a=n(343830),i=n(652062),o=n(467696),s=n(785893),u=n(285665),c=n(667294),l=n(680720),d=n(442834),g=n(534924),m=n(586552),f=function(e){function t(){return(0,a._)(this,t),(0,r._)(this,t,arguments)}return(0,o._)(t,e),(0,i._)(t,[{key:"render",value:function(){return(0,s.jsx)(m.Z,{children:(0,s.jsx)(g.Z,{settings:{title:u.ag._({id:"+ZEIt5",message:"You do not have permission to view this content"}),statusCode:403},children:(0,s.jsx)(d.Z,{fullPage:!0,children:(0,s.jsx)(l.Ih,{style:{textAlign:"center"},children:u.ag._({id:"+ZEIt5",message:"You do not have permission to view this content"})})})})})}}]),t}(c.Component)},582795:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(785893),a=n(481473),i=n(285665);n(667294);var o=n(462740),s=n(192774),u=n(878631),c=function(e,t){return(0,r.jsx)(a.cC,{message:"Uh oh, it looks like we ran into an error. You need to {refreshLink}. If this problem persists, {issueLink}.",id:"RxZ9Rz",values:{refreshLink:e,issueLink:t}})};let l=function(){var e=s.a("https://www.khanacademy.org/reportissue?type=Defect"),t=(0,r.jsx)(o.Z,{href:e,children:i.ag._({id:"vx1ZqM",message:"tell us"})}),n=(0,r.jsx)(o.Z,{href:"#",onClick:u.H5,children:i.ag._({id:"zSmxHz",message:"refresh"})});return(0,r.jsx)(r.Fragment,{children:c(n,t)})}},585925:function(e,t,n){n.d(t,{Z:function(){return w}});var r,a=n(208014),i=n(343830),o=n(652062),s=n(727412),u=n(467696),c=n(785893),l=n(667294),d=n(404103),g=n(847530),m=n(503883),f=n(285452),h=n(490655),p=n(477273),v=n(872387),y=n(281819),_=(0,m.Z)(function(e){var t=e.children,n=e.profile,r=e.childUserAllowed,a=e.template;return r?t:n?(null==n?void 0:n.get("isChildAccount"))?(0,c.jsx)(v.Z,{}):t:(0,c.jsx)(y.Z,{template:a})}),w=function(e){function t(){return(0,i._)(this,t),(0,a._)(this,t,arguments)}return(0,u._)(t,e),(0,o._)(t,[{key:"isAllowedToView",value:function(){return this.props.phantomUserAllowed&&g.C0.isPhantom||this.props.mobileAppUserAllowed&&f.wC()}},{key:"renderRoute",value:function(){return(0,c.jsx)(h.Z,{component:this.props.component,template:this.props.template})}},{key:"render",value:function(){var e=this;return(0,c.jsx)(d.AW,{path:this.props.path,exact:this.props.exact,render:function(){return e.isAllowedToView()?e.renderRoute():g.C0.isLoggedIn?(0,c.jsx)(_,{childUserAllowed:e.props.childUserAllowed,template:e.props.template,children:e.renderRoute()}):(0,c.jsx)(p.Z,{})}})}}]),t}(l.Component);(0,s._)(w,"defaultProps",{phantomUserAllowed:!1,childUserAllowed:!0,mobileAppUserAllowed:!1})},281819:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(785893),a=n(254170);n(667294);var i=n(635720),o=n(999183),s=n(161930),u=n(905768),c=a.StyleSheet.create({spinnerWrapper:{alignItems:"center",margin:"".concat(s.W0.xxLarge_48,"px ").concat(s.W0.small_12,"px")}});let l=function(e){return(0,r.jsx)(u.Z,{template:e.template,children:(0,r.jsx)(i.G7,{style:c.spinnerWrapper,children:(0,r.jsx)(o.y,{})})})}},504027:function(e,t,n){n.d(t,{Z:function(){return d}});var r=n(208014),a=n(343830),i=n(652062),o=n(467696),s=n(785893),u=n(667294),c=n(404103),l=n(490655),d=function(e){function t(){return(0,a._)(this,t),(0,r._)(this,t,arguments)}return(0,o._)(t,e),(0,i._)(t,[{key:"render",value:function(){var e=this.props,t=e.exact,n=e.path,r=e.component,a=e.template;return(0,s.jsx)(c.AW,{exact:t,path:n,render:function(){return(0,s.jsx)(l.Z,{component:r,template:a})}})}}]),t}(u.Component)},534924:function(e,t,n){n.d(t,{Z:function(){return g}});var r,a=n(208014),i=n(343830),o=n(652062),s=n(727412),u=n(467696),c=n(785893),l=n(667294),d=n(685911),g=function(e){function t(){return(0,i._)(this,t),(0,a._)(this,t,arguments)}return(0,u._)(t,e),(0,o._)(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.settings,r=e.resetSettings;return(0,c.jsx)(d.C.Consumer,{children:function(e){return(0,e.update)(n,r),t}})}}]),t}(l.PureComponent);(0,s._)(g,"defaultProps",{resetSettings:!0})},295327:function(e,t,n){n.d(t,{D:()=>h});var r=n("281964"),a=n("785893"),i=n("667294"),o=n("635720"),s=n("973495"),u=n("847530"),c=n("285452"),l=function(e){var t=new Set(["en","es","pt"]);return!(!t.has(u.O0.kaLocale)||!t.has(e)||c.wC()&&!u.O0.isIOS)&&!0},d=n("605110"),g=n("885001"),m=n("73250"),f=n("296886"),h=function(e){var t=e.children,n=e.initialAudioCache,u=(0,s.y)().preferences,c=u.guideVoiceDescriptor,f=u.guideLanguageCode,h=(0,r._)((0,i.useState)(null!=n?n:new d.k),2),v=h[0],y=h[1],_=(0,r._)((0,i.useState)(!1),2),w=_[0],C=_[1],S=(0,r._)((0,i.useState)(c),2),k=S[0],I=S[1],b=(0,m.z)(v),A=b.audioKey,E=b.chunkIndex,T=b.isPlaying,x=b.pause,D=b.play,L=b.stop,P=(0,i.useMemo)(function(){return l(f)},[f]);(0,i.useEffect)(function(){if(P){var e=k?"".concat(k,":").concat(f):"lmnt:khanmigo-m-1:en",t="".concat(e,":error");!v.has(t)&&(0,m.d)(e,"error").then(function(e){v.set(t,[e])})}},[P,f,k,v]),(0,i.useEffect)(function(){!P&&(T&&L(),C(!1))},[P]),(0,i.useEffect)(function(){k!==c&&I(c)},[c,k]);var N=(0,i.useMemo)(function(){return{audioCache:v,audioKey:A,chunkIndex:E,isTextToSpeechSupported:P,isPlaying:T,isVoiceOn:w,pause:x,play:D,selectedVoice:k,setAudioCache:y,setIsVoiceOn:C,setSelectedVoice:I,stop:L}},[v,A,E,P,T,w,x,D,k,L]),R=(0,o.vR)();return(0,a.jsxs)(g.J.Provider,{value:N,children:["standard"===R&&(0,a.jsx)(p,{}),t]})},p=function(){return(0,f.Hc)(),null}},42055:function(e,t,n){n.d(t,{l:function(){return A}});var r=n(676150),a=n(41196),i=n(281964),o=n(258865),s=n(816364),u=n(785893),c=n(644119),l=n.n(c),d=n(667294),g=n(658852),m=n(569051),f=n(847530),h=n(891821),p=n(2880),v=n(896527),y=n(301555),_=n(323658),w=n(232618),C=n(360871);function S(){var e=(0,o._)(["\n    query GuidePreferences {\n        user {\n            id\n            aiGuidePreferences {\n                readingLevel\n                guideLanguageCode\n                guideVoiceDescriptor\n                showDABs\n            }\n        }\n    }\n"]);return S=function(){return e},e}function k(){var e=(0,o._)(["\n    mutation SetGuidePreferences(\n        $readingLevel: AIGuideReadingLevel\n        $guideLanguageCode: String\n        $guideVoiceDescriptor: String\n        $showDABs: Boolean\n    ) {\n        setPreferencesForUser(\n            readingLevel: $readingLevel\n            guideLanguageCode: $guideLanguageCode\n            guideVoiceDescriptor: $guideVoiceDescriptor\n            showDABs: $showDABs\n        ) {\n            error {\n                code\n            }\n        }\n    }\n"]);return k=function(){return e},e}var I=(0,h.Fv)(l()(S())),b=(0,h.Fv)(l()(k())),A=function(e){var t,n=e.children,o=(0,i._)((0,p.Z)(b),1)[0],c=(0,i._)((0,v.Z)(I,{fetchPolicy:g.GE.NetworkOnly,skip:!f.C0.isLoggedIn}),2),l=c[0],h=c[1],S=(0,C.T)(),k=(0,i._)((0,d.useState)(!1),2),A=k[0],E=k[1],T=(0,i._)((0,d.useState)(y.E),2),x=T[0],D=T[1];var L=(0,d.useCallback)((t=(0,r._)(function(e){var t,n;return(0,s.Jh)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,3,4]),E(!0),[4,o(e)];case 1:if("error"===(t=r.sent()).status)throw new _.jc("Failed to set AI Guide user preferences",m.D1.Internal,{cause:t.error});if("success"===t.status&&t.data.setPreferencesForUser.error)throw new _.jc("Failed to set AI Guide user preferences",m.D1.Internal,{cause:t.data.setPreferencesForUser.error.code});return h(),[3,4];case 2:if(n=r.sent(),(0,a._)(n,_.jc))throw n;throw new _.jc("Failed to set AI Guide user preferences",m.D1.Internal);case 3:return E(!1),[7];case 4:return[2]}})}),function(e){return t.apply(this,arguments)}),[o,h]);(0,d.useEffect)(function(){if(E("loading"===l.status||"loading"===S.status),"success"===l.status&&"success"===S.status){var e=null===(r=l.data.user)||void 0===r?void 0:r.aiGuidePreferences,t=S.data.defaultLanguageCode;if(e){var n={readingLevel:null!==(a=e.readingLevel)&&void 0!==a?a:"LOW",guideLanguageCode:null!==(i=e.guideLanguageCode)&&void 0!==i?i:t,guideVoiceDescriptor:null!==(o=e.guideVoiceDescriptor)&&void 0!==o?o:null,showDABs:null!==(s=e.showDABs)&&void 0!==s?s:null};if(D(n),(0,w.Dl)("ReadingLevel")!==n.readingLevel&&(0,w.oj)("ReadingLevel",n.readingLevel),(0,w.Dl)("GuideLanguage")!==n.guideLanguageCode){var r,a,i,o,s,u,c=null===(u=S.data.guideLanguages.find(function(e){return e.id===n.guideLanguageCode}))||void 0===u?void 0:u.displayName;(0,w.oj)("GuideLanguage",c)}}}},[l,S]);var P=(0,d.useMemo)(function(){return{isLoading:A,preferences:x,refetchPreferences:h,setPreferences:L}},[L,x,h,A]);return(0,u.jsx)(y.I.Provider,{value:P,children:n})}},968563:function(e,t,n){n.d(t,{K:function(){return o}});var r=n(785893);n(667294);var a=n(593415),i=n(136156),o=function(e){var t=e.children;return(0,r.jsx)(i.t.Provider,{value:a,children:t})}},529601:function(e,t,n){n.d(t,{Z:()=>eW});var r=n("785893"),a=n("285665"),i=n("847530");a.ag.load(i.O0.kaLocale,{}),a.ag.activate(i.O0.kaLocale);var o=n("667294"),s=n("101543"),u=n("635720"),c=n("425732"),l=n("656467"),d=n("685911"),g=n("295327"),m=n("281964"),f=n("640830"),h=n("593415"),p=n("270291"),v=function(e){var t=(0,m._)((0,o.useState)(y(h.latest().conversation)?h.latest().threadId:""),2),n=t[0],a=t[1];(0,p.O)("threadId",function(e){var t=e.conversation,n=e.threadId;a(y(t)?n:"")}),(0,p.O)("conversation",function(e){var t=e.conversation,n=e.threadId;a(y(t)?n:"")});var i=(0,o.useMemo)(function(){return{content:{aiGuideThreadId:null!=n?n:""}}},[n]);return(0,r.jsx)(f.$,{learningTimeInfo:i,children:e.children})},y=function(e){return e.some(function(e){return"outgoing"===e.type})},_=n("42055"),w=n("968563"),C=n("858186"),S=function(e){var t=(0,m._)((0,o.useState)(null),2),n=t[0],a=t[1],i=(0,m._)((0,o.useState)({}),2),s=i[0],u=i[1],c=(0,m._)((0,o.useState)(function(){return function(){}}),2),l=c[0],d=c[1],g=Object.values(s).some(function(e){return e});return(0,r.jsx)(C.b.Provider,{value:{setOpenKeypadID:a,setActiveInputs:u,setSendMessage:d},children:(0,r.jsx)(C.t.Provider,{value:{openKeypadID:n,isAnyActive:g,sendMessage:l},children:e.children})})},k=n("34136"),I=function(e){var t=e.children,n=(0,m._)((0,o.useState)(!1),2),a=n[0],i=n[1];return(0,r.jsx)(k.y.Provider,{value:i,children:(0,r.jsx)(k.v.Provider,{value:a,children:t})})};let b=function(e){var t=e.children,n=e.initialAudioCache;return(0,r.jsx)(w.K,{children:(0,r.jsx)(S,{children:(0,r.jsx)(I,{children:(0,r.jsx)(v,{children:(0,r.jsx)(_.l,{children:(0,r.jsx)(g.D,{initialAudioCache:n,children:t})})})})})})};var A=n("103181"),E=function(){var e=(0,A.Z)();(0,o.useEffect)(function(){h.set("bufferResponse",e)},[e])},T=n("85663"),x=n("258865"),D=n("644119"),L=n.n(D),P=n("891821"),N=n("896527");function R(){var e=(0,x._)(["\n    query aiGuideSwagAppliedQuery {\n        user {\n            id\n            aiGuideSwagApplied {\n                id\n            }\n        }\n    }\n"]);return R=function(){return e},e}var O=(0,P.Fv)(L()(R())),j=function(){var e=(0,m._)((0,N.Z)(O),1)[0];return(0,o.useMemo)(function(){var t,n,r;return"success"!==e.status?e:{status:"success",data:null!==(r=null===(n=e.data.user)||void 0===n?void 0:null===(t=n.aiGuideSwagApplied)||void 0===t?void 0:t.id)&&void 0!==r?r:"default"}},[e])},B=function(){var e=j();(0,o.useEffect)(function(){if("success"===e.status){var t;h.set("swagId",null!==(t=e.data)&&void 0!==t?t:"default")}},[e]);var t=(0,T.Z)({skip:!1});(0,o.useEffect)(function(){if("success"===t.status&&void 0!==t.cooldownStatus){var e=t.cooldownStatus.hasCooldown;h.set("isOffline",e)}},[t])},M=n("676150"),G=n("816364"),U=n("168895"),Z=n("305505"),F=n("380898"),V=n("55745"),K=n("155232"),z=n("712412"),H=n("57702"),Y=n("137136"),W=n("632073"),q=n("539266"),$=n("691506"),J=n("2765"),Q=n("232618"),X=n("86507");let ee=function(e){var t=e.split("/"),n=e.startsWith("/teacher/class/"),r=4===t.length||5===t.length&&""===t[4];return n&&r};var et=n("605110"),en=n("930928"),er=n("575618"),ea=n("679202"),ei=function(){var e=(0,Z.T)(),t=e.pathname,n=e.search,r=(0,F.Z)(),a="success"===r.status?r.profile:null,i=(0,$.c)(),s=(0,J.lv)(),u=h.latest().userAsStudent,c=(0,o.useRef)(null),l=(0,X.l)(t),d=(0,q.m)(),g=d.setAudioCache,m=d.stop,f=d.setIsVoiceOn;(0,o.useLayoutEffect)(function(){if(!(!(null==a?void 0:a.get("isAIGuideEnabled"))||c.current===t||ee(t))){c.current=t,ea.TL(),h.set("contentURLPath",null),h.set("contextualLinks",[]),h.set("dynamicBot",null),h.set("modelOverride",null),h.set("temperatureOverride",null),h.set("userHasToggledPersona",!1),h.set("retryTimeoutSeconds",0),h.set("temperatureOverride",null),m(),g(new et.k);var e,r=(0,en.I)(t),o=(0,U.hn)(t);r===V.Y.ChatWithHistoricalFigure&&f(!1);var d=(0,z.c)(a);u&&(0,er.o8)(t,d)?h.set("selectedBotName",V.Y.DefaultLearner):h.set("selectedBotName",null!==(e=null!=r?r:null==o?void 0:o.configName)&&void 0!==e?e:null),(0,Q.OS)({exclude:["ReadingLevel","GuideLanguage",K.GF,K.Uo,K.AT]});var p=(0,er.qB)(t);(p||l)&&h.set("open",!1);var v=p&&"activity-academic-essay-feedback"!==h.latest().selectedBotName&&"activity-writing-coach"!==h.latest().selectedBotName,y=!l&&h.latest().open,_=new URLSearchParams(n).get("resumeThreadId"),w=(0,U.rP)(t),C=t===W.Hb.myEssays;i(!_&&(v||y||w||C)).finally((0,M._)(function(){return(0,G.Jh)(this,function(e){switch(e.label){case 0:if(!_)return[3,2];return[4,s(_)];case 1:e.sent(),h.set("open",!0),e.label=2;case 2:return[2]}})}));var S=(0,Y.Z)();(0,H.a)({pathname:t,newNavigationId:S}),h.set("navigation",{id:S,path:t})}},[l,t,a,i,s,n,g,f,m,u])},eo=n("277573"),es=n("51761"),eu=n("101459"),ec=n("782144"),el=function(){var e,t,n,r;e=(0,eu.u)(ec.vW,h.latest().hasAcknowledgedGuide),(0,o.useEffect)(function(){e&&h.set("hasAcknowledgedGuide",!0)},[e]),E(),B(),t=(0,es.a)("retryTimeoutSeconds"),n=(0,o.useRef)(t),r=(0,eo.Yz)(function(){h.set("retryTimeoutSeconds",function(e){return e-1})},1e3,{schedulePolicy:eo.fk.OnDemand}),(0,o.useEffect)(function(){0===n.current&&t>0?r.set():t<=0&&r.clear()},[r,t]),ei()},ed=n("393270"),eg=n("913819"),em=n("698332"),ef=n("707409"),eh=n("499282"),ep=n("287840"),ev=n("992844"),ey=n("323658"),e_=n("269887"),ew=n.n(e_),eC=n("569051"),eS=n("579562"),ek=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(t=globalThis.__GROWTHBOOK_FEATURES__)||void 0===t?void 0:t.features;return(0,ep.KX)({maxAge:3e5}),new ep.Gr({apiHost:e,clientKey:"sdk-u16yaYPyqdZ0OHuZ",features:n,enableDevMode:i.O0.IS_DEV_SERVER||i.C0.hasAnyPermissions,subscribeToChanges:!1,backgroundSync:!1,trackingCallback:eI(n)})},eI=function(e){return function(t,n){var r=n.featureId;!(r?eb(e[r]):[]).includes(t.key)&&ey.ZP.error("No featureId for the given experiment",ey.D1.Internal,{sentryData:{tags:{growthbook:"true",experimentKey:t.key}}}),(0,eS.x)({eventType:"ExperimentationPlatformVariationAssigned",eventSchemaVersion:3,experimentId:t.key,experimentPhase:t.phase||"0",variationId:n.key,featureId:null!=r?r:"",featureHash:r?eA(e[r]):""})}},eb=function(e){return e?(e.rules||[]).map(function(e){return e.key}).filter(eC.C_):[]},eA=function(e){return ew()(JSON.stringify(e)).toString()},eE=n("105551");function eT(e){var t,n=e.children,a=(0,m._)(o.useState(null),2),s=a[0],u=a[1],c=(0,F.Z)(),l=(0,Z.T)(),d=o.useRef(null!==(t=globalThis.__GROWTHBOOK_HASHED_KAID__)&&void 0!==t?t:null);return((0,o.useEffect)(function(){if(!l.origin.includes(".kasandbox.org")){var e,t=ek(l.origin);t.setAttributes(ex()),i.C0.hasProfile?(!d.current&&ey.ZP.error("Expected __GROWTHBOOK_HASHED_KAID__ to have a value",ey.D1.Internal,{sentryData:{tags:{growthbook:"true",growthbookKaid:null!==(e=d.current)&&void 0!==e?e:"null"}}}),t.setAttributes(ex(d.current)),eE.z.emit("ready")):(t.setAttributes(ex(d.current)),(0,ev.PT)("/_fastly/growthbook-kaid").then(function(e){return e.text()}).then(function(e){d.current=e;var n,r,a="success"===c.status?c.profile:null,i=ex(d.current,a);null==t||t.setAttributes(i),eE.z.isReady&&ey.ZP.error("growthBookKaidEventEmitter.isReady was true before the kaid was set",ey.D1.Internal,{sentryData:{tags:{growthbook:"true",growthbookKaid:null!==(n=d.current)&&void 0!==n?n:"null"}}}),eE.z.emit("ready"),!d.current&&ey.ZP.error("Expected a truthy response from /_fastly/growthbook-kaid",ey.D1.Internal,{sentryData:{tags:{growthbook:"true",growthbookKaid:null!==(r=d.current)&&void 0!==r?r:"null"}}})})),t.loadFeatures({autoRefresh:!0}),u(t)}},[l.origin]),(0,o.useEffect)(function(){var e="success"===c.status?c.profile:null;null==s||s.setAttributes(ex(d.current,e))},[s,c]),(0,eo.Yz)(function(){return null==s?void 0:s.refreshFeatures({skipCache:!0})},3e5),s)?(0,r.jsx)(ep.Ny,{growthbook:s,children:n}):(0,r.jsx)(r.Fragment,{children:n})}var ex=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,n=(0,eh._)((0,ef._)({},i.C0,i.O0,i.Pg),{isMobileApp:!1});return n.kaid=e,t&&Object.assign(n,{districtIds:t.get("userDistrictInfos").map(function(e){return e.district.id}),isParent:t.get("isParent"),isTeacher:t.get("isTeacher"),hasChildStudents:t.get("hasChildStudents"),actorIsImpersonatingUser:t.get("actorIsImpersonatingUser"),includesDistrictOwnedData:t.get("includesDistrictOwnedData"),isAIGuideEnabled:t.get("isAIGuideEnabled"),hasAccessToAIGuideDev:t.get("hasAccessToAIGuideDev"),underAgeGate:!!t.get("underAgeGate"),hasCoach:t.get("hasCoach"),hasClasses:t.get("hasClasses"),isDeveloper:t.get("isDeveloper"),isPublisher:t.get("isPublisher")}),n},eD=n("208014"),eL=n("343830"),eP=n("652062"),eN=n("467696"),eR=n("643622"),eO=n("727412"),ej=n("533797"),eB=n("404103"),eM=function(e){function t(){var e;return(0,eL._)(this,t),e=(0,eD._)(this,t,arguments),(0,eO._)(e,"history",(0,ej.lX)(e.props)),e}return(0,eN._)(t,e),(0,eP._)(t,[{key:"componentDidUpdate",value:function(e){this.props.forceRefresh!==e.forceRefresh&&this.history.setForceRefresh(this.props.forceRefresh)}},{key:"render",value:function(){return(0,r.jsx)(eB.F0,{history:this.history,children:this.props.children})}}]),t}(o.Component),eG=n("889477"),eU=function(e){function t(){return(0,eL._)(this,t),(0,eD._)(this,t,arguments)}return(0,eN._)(t,e),(0,eP._)(t,[{key:"_renderRouter",value:function(){var e=this.props.children;return i.O0.IS_DEV_SERVER?(0,r.jsx)(eM,{children:e}):(0,r.jsx)(eG.Z,{children:function(t){var n=t.forceRefresh;return(0,r.jsx)(eM,{forceRefresh:n,children:e})}})}},{key:"render",value:function(){return(0,r.jsx)(eR.Z,{children:this._renderRouter()})}}]),t}(o.Component),eZ=n("852797"),eF=n("751304"),eV=function(){var e=(0,Z.T)();(0,u.xM)(function(){var t=e.search,n=(0,eF.Z)(t);(0,eZ.createCookiesFromURL)(n)})},eK=n("808114"),ez=n("775567"),eH=function(){var e=(0,Z.T)(),t=(0,eB.k6)(),n=(0,eB.$B)(),r=1===t.length,a=o.useCallback(function(){(0,ez.Zi)((null==n?void 0:n.path)||"")},[n]),i=o.useCallback(function(){"hidden"===document.visibilityState&&a()},[a]),s=(0,eo.KS)(a,15e3);(0,u.xM)(function(){return document.addEventListener("visibilitychange",i),window.addEventListener("pagehide",a),s.set(),function(){s.clear(),document.removeEventListener("visibilitychange",i),window.removeEventListener("pagehide",a)}}),o.useEffect(function(){var t=e.pathname,n=e.search;!r&&(a(),eK.bF(),eK.jx(t,n))},[e,r,a])},eY=function(e){var t=e.children;return eH(),eV(),el(),(0,r.jsx)(eT,{children:(0,r.jsx)(s.h,{children:t})})};let eW=function(e){return(0,r.jsx)(ed.l,{children:(0,r.jsx)(c.Ny.Provider,{value:{ssrSize:i.O0.isPhone?"small":"large",mediaSpec:c.R4},children:(0,r.jsx)(u.aX,{throwIfNested:!1,children:(0,r.jsx)(d.Z,{children:(0,r.jsx)(em.Z,{error:e.error,errorFallback:function(){return(0,r.jsx)(l.Z,{})},children:(0,r.jsx)(eg.Z.Provider,{value:{inAppShell:!0,entrypoint:e.entrypoint},children:(0,r.jsx)(eU,{children:(0,r.jsx)(b,{children:(0,r.jsx)(eY,{children:e.children})})})})})})})})})}},698332:function(e,t,n){n.d(t,{Z:function(){return m}});var r=n(208014),a=n(343830),i=n(652062),o=n(727412),s=n(467696),u=n(707409),c=n(785893),l=n(667294),d=n(427827),g=n(323658),m=function(e){function t(){var e;return(0,a._)(this,t),e=(0,r._)(this,t,arguments),(0,o._)(e,"state",{error:null}),(0,o._)(e,"logError",function(t,n){if(e.props.onError){e.props.onError(t,n);return}g.ZP.error("CSR Error",g.D1.Internal,{metadata:(0,u._)({},n),cause:t})}),(0,o._)(e,"renderError",function(){return e.props.errorFallback?e.props.errorFallback(e.state.error||e.props.error):(0,c.jsx)(d.Z,{})}),e}return(0,s._)(t,e),(0,i._)(t,[{key:"componentDidCatch",value:function(e,t){this.logError(e,t)}},{key:"render",value:function(){return this.state.error||this.props.error?this.renderError():this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e}}}]),t}(l.Component)},576477:function(e,t,n){n.d(t,{Z:function(){return u}});var r=n(785893);n(667294);var a=n(404103),i=n(281819),o=n(878631),s=function(e,t){return(0,o.uX)(e,t),(0,r.jsx)(i.Z,{})};function u(e){var t=e.from,n=e.to,i=e.isPermanent;return null!=t?(0,r.jsx)(a.AW,{path:t,render:function(){return s(n,!!i)}}):s(n,!!i)}},889477:function(e,t,n){n.d(t,{j:()=>P,Z:()=>N});var r,a,i,o,s=n("281964"),u=n("785893"),c=n("667294"),l=n("208014"),d=n("343830"),g=n("652062"),m=n("727412"),f=n("467696"),h=n("793488"),p=n("277573"),v=n("847530"),y=n("323658"),_=n("676150"),w=n("816364");n("344481");var C=n("992844"),S=n("852797"),k=function(){var e=(0,S.readCookie)("KAAC");return e?(e=e.replace(/^[^.]*\./,"")).replace(/^[~%][^$]*/,""):e};var I=(r=(0,_._)(function(){var e,t,n;return(0,w.Jh)(this,function(n){switch(n.label){case 0:var r;return n.trys.push([0,2,,3]),[4,Promise.all([(0,C.PT)("/_api/static_version").then(function(e){return e.json()}).then(function(e){return e.version}),(r=v.O0.kaLocale,(0,C.PT)("/_fastly/published-content-version/".concat(r)).then(function(e){return e.json()}).then(function(e){return e.publishedContentVersion}))])];case 1:return t=(e=s._.apply(void 0,[n.sent(),2]))[0],[2,{currentStaticVersion:t,currentCommitSHA:e[1]}];case 2:throw n.sent(),new y.jc("Incomplete commit and static version.",y.D1.Internal);case 3:return[2]}})}),function(){return r.apply(this,arguments)}),b=n("707409"),A=n("499282"),E=function(e){function t(){var e;return(0,d._)(this,t),e=(0,l._)(this,t,arguments),(0,m._)(e,"LAST_USER_INTERACTION",void 0),(0,m._)(e,"state",{hasInteractedRecently:!0}),(0,m._)(e,"hasInteractedRecently",function(){var t=e.props.timeout,n=e.state.hasInteractedRecently,r=e.LAST_USER_INTERACTION+(null!=t?t:0)>=Date.now();n!==r&&e.setState({hasInteractedRecently:r})}),(0,m._)(e,"trackUserInteraction",function(){e.LAST_USER_INTERACTION=Date.now()}),e}return(0,f._)(t,e),(0,g._)(t,[{key:"componentDidMount",value:function(){this.LAST_USER_INTERACTION=Date.now(),this.props.schedule.interval(this.hasInteractedRecently,1e3),document.addEventListener("mousemove",this.trackUserInteraction),document.addEventListener("scroll",this.trackUserInteraction,!0),document.addEventListener("visibilitychange",this.trackUserInteraction)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.trackUserInteraction),document.removeEventListener("scroll",this.trackUserInteraction,!0),document.removeEventListener("visibilitychange",this.trackUserInteraction)}},{key:"render",value:function(){var e=this.state.hasInteractedRecently;return this.props.children({hasInteractedRecently:e})}}]),t}(c.Component);(0,m._)(E,"defaultProps",{timeout:6e5});var T=(0,h.compose)(p.$K)(E),x=c.createContext(null);x.displayName="InteractedRecentlyContext";var D=function(e){function t(){var e;return(0,d._)(this,t),e=(0,l._)(this,t,arguments),(0,m._)(e,"INITIAL_KAAC",void 0),(0,m._)(e,"LATEST_COMMIT",void 0),(0,m._)(e,"refreshModalPromise",void 0),(0,m._)(e,"state",{forceRefresh:!1}),(0,m._)(e,"cancelIntervals",function(){e.props.schedule.clearAll()}),(0,m._)(e,"checkForceRefresh",function(){!e.state.forceRefresh&&k()!==e.INITIAL_KAAC&&(e.log("KAAC Cookie Changed, Force Refresh"),e.safelySetState({forceRefresh:!0}))}),(0,m._)(e,"checkDeploysAndPublishes",function(){if(!e.state.forceRefresh&&!v.O0.isE2E&&!v.O0.isBot)I().then(function(t){var n=t.currentStaticVersion,r=t.currentCommitSHA;n!==v.Pg.staticVersion&&(e.log("Static Version Changed, Force Refresh"),e.safelySetState({forceRefresh:!0})),r!==e.LATEST_COMMIT&&(e.log("Clearing Apollo & Content Data Caches"),e.LATEST_COMMIT=r)}).catch(function(){})}),(0,m._)(e,"checkUserDataUpdate",function(){var t=e.props.hasInteractedRecently,n=e.state.forceRefresh;!document.hidden&&!n&&t&&e.log("Updating User Details")}),e}return(0,f._)(t,e),(0,g._)(t,[{key:"componentDidMount",value:function(){var e=this;this.INITIAL_KAAC=k(),this.LATEST_COMMIT=v.Pg.commitSHA;var t=this.props.schedule;t.interval(this.checkForceRefresh,1e3),t.timeout(function(){t.interval(e.checkDeploysAndPublishes,6e4)},18e5),t.interval(this.checkUserDataUpdate,6e5),window.addEventListener("beforeunload",this.cancelIntervals)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.cancelIntervals)}},{key:"log",value:function(e){y.ZP.log("Periodic Update: ".concat(e))}},{key:"safelySetState",value:function(e){try{this.setState(e)}catch(e){this.log("Failed to safely set state.")}}},{key:"render",value:function(){var e=this.state.forceRefresh,t=this.props.allowForceRefresh;return(0,u.jsx)(u.Fragment,{children:this.props.children({forceRefresh:t&&e})})}}]),t}(c.Component);(0,m._)(D,"defaultProps",{allowForceRefresh:!0});let L=(0,h.compose)(p.$K,function(e){return function(t){return(0,u.jsx)(x.Consumer,{children:function(n){return n?(0,u.jsx)(e,(0,A._)((0,b._)({},t),{hasInteractedRecently:n.hasInteractedRecently})):(0,u.jsx)(T,{timeout:void 0,children:function(n){var r=n.hasInteractedRecently;return(0,u.jsx)(e,(0,A._)((0,b._)({},t),{hasInteractedRecently:r}))}})}})}})(D);var P=c.createContext({toggleForceRefresh:function(e){}});function N(e){var t=e.children,n=(0,s._)(c.useState(!0),2),r=n[0],a=n[1],i=c.useMemo(function(){return{toggleForceRefresh:a}},[]);return(0,u.jsx)(P.Provider,{value:i,children:(0,u.jsx)(L,{allowForceRefresh:r,children:t})})}P.displayName="PeriodicUpdateContext"},938430:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(707409),a=n(785893);n(667294);var i=n(404103),o=n(534924);function s(e){return(0,a.jsx)(o.Z,{settings:{statusCode:301},children:(0,a.jsx)(i.l_,(0,r._)({},e))})}},867411:function(e,t,n){n.d(t,{Z:function(){return l}});var r=n(398848),a=n(785893);n(667294);var i=n(404103),o=n(305505),s=n(555958),u=n(576477),c=n(938430);let l=function(e){var t=(0,o.T)(),n=e.to,l=e.isPermanent,d=e.forceFullPageLoad,g=e.preserveSearchParams,m=(0,r._)(e,["to","isPermanent","forceFullPageLoad","preserveSearchParams"]),f=null==m.computedMatch?n:(0,i.Gn)(n,m.computedMatch.params).replace(/%2F/g,"/"),h=g?"".concat(f).concat(t.search):f;return d||!(0,s.j3)(h)?(0,a.jsx)(u.Z,{to:h,from:m.from||void 0,isPermanent:l}):l?(0,a.jsx)(c.Z,{to:h,from:m.from||void 0}):(0,a.jsx)(i.l_,{to:h,from:m.from||void 0})}}}]);
//# sourceMappingURL=sourcemaps/en/169879.bfbb773dda6fd5ef.js.map